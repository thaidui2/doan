-- phpMyAdmin SQL Dump
-- version 5.2.1
-- https://www.phpmyadmin.net/
--
-- Máy chủ: 127.0.0.1
-- Thời gian đã tạo: Th4 14, 2025 lúc 06:38 AM
-- Phiên bản máy phục vụ: 10.4.32-MariaDB
-- Phiên bản PHP: 8.2.12

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Cơ sở dữ liệu: `shop_vippro`
--

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `admin`
--

CREATE TABLE `admin` (
  `id_admin` int(11) NOT NULL,
  `taikhoan` varchar(100) NOT NULL,
  `matkhau` varchar(255) NOT NULL,
  `ten_admin` varchar(100) NOT NULL,
  `email` varchar(100) NOT NULL,
  `cap_bac` tinyint(1) NOT NULL COMMENT '1: Quản lý, 2: Admin',
  `trang_thai` tinyint(1) NOT NULL DEFAULT 1 COMMENT '0: Khóa, 1: Hoạt động',
  `ngay_tao` timestamp NOT NULL DEFAULT current_timestamp(),
  `lan_dang_nhap_cuoi` timestamp NULL DEFAULT NULL,
  `anh_dai_dien` varchar(200) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `admin`
--

INSERT INTO `admin` (`id_admin`, `taikhoan`, `matkhau`, `ten_admin`, `email`, `cap_bac`, `trang_thai`, `ngay_tao`, `lan_dang_nhap_cuoi`, `anh_dai_dien`) VALUES
(6, 'admin', '$2y$10$BXBpMwvzlwPQ8pyEGAu1Suh9uzzM3J59Rj8ur/lZgBgPhHvwtCvle', 'Super Administrator', 'tobenha4@gmail.com', 2, 1, '2025-04-03 14:12:55', '2025-04-14 02:59:04', NULL),
(7, 'manager1', '$2y$10$Bu.sZV84rz9vDAi//4RlweQJovr24W7wgMqExm6I8Y4rNFQpvRNPC', 'manager-1', '$2y$10$TbPJnfN/tKAYXgb2aKPD5ut5x4MfSG0Fqb/Ak8WPV6wf9DK5IyFzq', 1, 1, '2025-04-06 14:37:17', '2025-04-10 13:53:57', NULL),
(8, 'thaimanager', '$2y$10$rH.rNjERGCtnPU54gf8lC.RrGtd8kOE11qo0UIlqDwGoS4yI1RQcq', 'thai-mng1', 'thaimng1@gmail.com', 1, 1, '2025-04-06 15:22:29', '2025-04-10 13:55:12', 'avatar_67f7883111623.jpg');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `admin_actions`
--

CREATE TABLE `admin_actions` (
  `id` int(11) NOT NULL,
  `admin_id` int(11) NOT NULL,
  `action_type` varchar(100) NOT NULL,
  `target_type` varchar(50) NOT NULL,
  `target_id` int(11) NOT NULL,
  `details` text DEFAULT NULL,
  `ip_address` varchar(45) DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `admin_actions`
--

INSERT INTO `admin_actions` (`id`, `admin_id`, `action_type`, `target_type`, `target_id`, `details`, `ip_address`, `created_at`) VALUES
(1, 6, 'edit', 'admin', 7, 'Chỉnh sửa thông tin admin #7 (manager1) bởi Super Administrator', '::1', '2025-04-06 14:49:52'),
(2, 6, 'disable', 'category', 1, 'Ẩn danh mục #1', '::1', '2025-04-06 15:32:21'),
(3, 6, 'edit', 'category', 1, 'Cập nhật danh mục: Giày Nam', '::1', '2025-04-06 15:50:48'),
(4, 6, 'edit', 'category', 2, 'Cập nhật danh mục: Giày Nữ', '::1', '2025-04-06 15:52:11'),
(5, 6, 'edit', 'category', 2, 'Cập nhật danh mục: Giày Nữ', '::1', '2025-04-06 15:53:01'),
(6, 6, 'edit', 'category', 3, 'Cập nhật danh mục: Giày Thể Thao', '::1', '2025-04-06 15:54:04'),
(7, 6, 'edit', 'category', 3, 'Cập nhật danh mục: Giày Thể Thao', '::1', '2025-04-06 15:55:12'),
(8, 6, 'edit', 'category', 4, 'Cập nhật danh mục: Giày Thời Trang', '::1', '2025-04-06 16:00:46'),
(9, 6, 'edit', 'category', 5, 'Cập nhật danh mục: Giày Trẻ Em', '::1', '2025-04-06 16:02:20'),
(10, 6, 'edit', 'admin', 6, 'Chỉnh sửa thông tin admin #6 (admin) bởi Super Administrator', '::1', '2025-04-06 16:36:10'),
(11, 6, 'edit', 'admin', 6, 'Chỉnh sửa thông tin admin #6 (admin) bởi Super Administrator', '::1', '2025-04-06 16:48:13'),
(12, 6, 'upgrade_to_seller', 'user', 5, 'Nâng cấp người dùng #5 thành người bán', '::1', '2025-04-06 17:22:42'),
(13, 6, 'hide_review', 'review', 1, 'Đã ẩn đánh giá #1', '::1', '2025-04-08 03:09:55'),
(14, 6, 'approve_review', 'review', 1, 'Đã hiển thị đánh giá #1', '::1', '2025-04-08 03:10:09'),
(15, 6, 'hide_review', 'review', 1, 'Đã ẩn đánh giá #1', '::1', '2025-04-08 03:11:39'),
(16, 6, 'approve_review', 'review', 1, 'Đã hiển thị đánh giá #1', '::1', '2025-04-08 03:11:43'),
(17, 6, 'edit', 'product', 6, 'Cập nhật sản phẩm: Biti\'s Hunter Street x Vietmax 2020 - BST HaNoi Culture Patchwork Old Wall Yellow.', '::1', '2025-04-08 10:02:39'),
(18, 6, 'edit', 'product', 6, 'Cập nhật sản phẩm: Biti\'s Hunter Street x Vietmax 2020 - BST HaNoi Culture Patchwork Old Wall Yellow.', '::1', '2025-04-08 10:04:33'),
(19, 6, 'edit', 'product', 2, 'Cập nhật sản phẩm: giày', '::1', '2025-04-09 05:55:16'),
(20, 6, 'edit', 'product', 2, 'Cập nhật sản phẩm: giày', '::1', '2025-04-09 05:55:42'),
(21, 6, 'edit', 'product', 2, 'Cập nhật sản phẩm: giày', '::1', '2025-04-09 05:56:13'),
(22, 6, 'edit', 'product', 2, 'Cập nhật sản phẩm: giày', '::1', '2025-04-09 05:56:25'),
(23, 6, 'edit', 'admin', 6, 'Chỉnh sửa thông tin admin #6 (admin) bởi Super Administrator', '::1', '2025-04-09 06:36:49'),
(24, 6, 'edit', 'admin', 6, 'Chỉnh sửa thông tin admin #6 (admin) bởi Super Administrator', '::1', '2025-04-09 06:37:08'),
(25, 6, 'edit', 'admin', 6, 'Chỉnh sửa thông tin admin #6 (admin) bởi Super Administrator', '::1', '2025-04-09 06:56:08'),
(26, 6, 'edit', 'admin', 6, 'Chỉnh sửa thông tin admin #6 (admin) bởi Super Administrator', '::1', '2025-04-09 06:56:28'),
(27, 6, 'edit', 'admin', 6, 'Chỉnh sửa thông tin admin #6 (admin) bởi Super Administrator', '::1', '2025-04-09 06:57:04'),
(28, 6, 'edit', 'admin', 8, 'Chỉnh sửa thông tin admin #8 (thaimanager) bởi Super Administrator', '::1', '2025-04-09 06:57:19'),
(29, 6, 'edit', 'admin', 6, 'Chỉnh sửa thông tin admin #6 (admin) bởi Super Administrator', '::1', '2025-04-09 07:01:33'),
(30, 6, 'edit', 'admin', 8, 'Chỉnh sửa thông tin admin #8 (thaimanager) bởi Super Administrator', '::1', '2025-04-09 07:01:45'),
(31, 6, 'edit', 'admin', 6, 'Chỉnh sửa thông tin admin #6 (admin) bởi Super Administrator', '::1', '2025-04-09 08:36:56'),
(32, 6, 'update', 'settings', 0, 'Cập nhật cài đặt: General', '::1', '2025-04-09 13:01:51'),
(33, 6, 'add', 'promo', 4, 'Thêm mã giảm giá mới: TESTADMIN2', '::1', '2025-04-09 13:17:53'),
(34, 6, 'delete', 'promo', 4, 'Đã xóa mã giảm giá #4', '::1', '2025-04-09 13:30:55'),
(35, 6, 'add', 'category', 6, 'Thêm danh mục mới: Dép', '::1', '2025-04-10 04:52:57'),
(36, 6, 'edit', 'product', 3, 'Cập nhật sản phẩm: dép tổ ong', '::1', '2025-04-10 05:02:16'),
(37, 6, 'delete_review', 'review', 4, 'Đã xóa đánh giá #4 của sản phẩm \"giày\"', '::1', '2025-04-10 05:08:01'),
(38, 6, 'update', 'settings', 0, 'Cập nhật cài đặt: General', '::1', '2025-04-10 05:40:36'),
(39, 6, 'update', 'settings', 0, 'Cập nhật cài đặt: General', '::1', '2025-04-10 07:53:21'),
(40, 6, 'edit', 'admin', 8, 'Chỉnh sửa thông tin admin #8 (thaimanager) bởi Super Administrator', '::1', '2025-04-10 08:50:53'),
(41, 6, 'edit', 'admin', 8, 'Chỉnh sửa thông tin admin #8 (thaimanager) bởi Super Administrator', '::1', '2025-04-10 08:51:20'),
(42, 6, 'edit', 'admin', 8, 'Chỉnh sửa thông tin admin #8 (thaimanager) bởi Super Administrator', '::1', '2025-04-10 08:51:55'),
(43, 6, 'edit', 'admin', 8, 'Chỉnh sửa thông tin admin #8 (thaimanager) bởi Super Administrator', '::1', '2025-04-10 08:52:05'),
(44, 6, 'edit', 'admin', 8, 'Chỉnh sửa thông tin admin #8 (thaimanager) bởi Super Administrator', '::1', '2025-04-10 08:56:51'),
(45, 6, 'edit', 'admin', 8, 'Chỉnh sửa thông tin admin #8 (thaimanager) bởi Super Administrator', '::1', '2025-04-10 08:57:02'),
(46, 8, 'change_password', 'admin', 8, 'Thay đổi mật khẩu', '::1', '2025-04-10 08:57:59'),
(47, 8, 'update_avatar', 'admin', 8, 'Cập nhật ảnh đại diện', '::1', '2025-04-10 08:58:25'),
(48, 6, 'update', 'permissions', 0, 'Cập nhật quyền quản lý khuyến mãi cho vai trò Quản lý', '::1', '2025-04-10 13:48:34'),
(49, 6, 'update', 'permissions', 0, 'Cập nhật quyền quản lý khuyến mãi cho vai trò Quản lý', '::1', '2025-04-10 13:48:55'),
(50, 6, 'update', 'permissions', 0, 'Cập nhật quyền quản lý khuyến mãi cho vai trò Quản lý', '::1', '2025-04-10 13:48:59'),
(51, 6, 'update', 'permissions', 0, 'Cập nhật quyền quản lý khuyến mãi cho vai trò Quản lý', '::1', '2025-04-10 13:49:10'),
(52, 6, 'update', 'permissions', 0, 'Cập nhật quyền quản lý khuyến mãi cho vai trò Quản lý', '::1', '2025-04-10 13:49:10'),
(53, 6, 'update', 'permissions', 0, 'Cập nhật quyền quản lý khuyến mãi cho vai trò Quản lý', '::1', '2025-04-10 13:49:10'),
(54, 6, 'update', 'permissions', 0, 'Cập nhật quyền quản lý khuyến mãi cho vai trò Quản lý', '::1', '2025-04-10 13:49:31'),
(55, 6, 'update', 'permissions', 0, 'Cập nhật quyền quản lý khuyến mãi cho vai trò Quản lý', '::1', '2025-04-10 13:49:52'),
(56, 6, 'update', 'permissions', 0, 'Cập nhật quyền quản lý khuyến mãi cho vai trò Quản lý', '::1', '2025-04-10 13:54:43'),
(57, 8, 'add', 'promo', 5, 'Thêm mã giảm giá mới: TESTMNG1', '::1', '2025-04-10 14:01:54'),
(58, 8, 'toggle_status', 'promo', 5, 'Vô hiệu hóa mã giảm giá #5', '::1', '2025-04-10 14:11:20'),
(59, 8, 'toggle_status', 'promo', 5, 'Kích hoạt mã giảm giá #5', '::1', '2025-04-10 14:14:56'),
(60, 8, 'hide_review', 'review', 2, 'Đã ẩn đánh giá #2', '::1', '2025-04-10 14:22:02'),
(61, 8, 'approve_review', 'review', 2, 'Đã hiển thị đánh giá #2', '::1', '2025-04-10 14:22:06'),
(62, 6, 'add', 'promo', 6, 'Thêm mã giảm giá mới: TESTADMIN2', '::1', '2025-04-12 17:13:44');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `admin_roles`
--

CREATE TABLE `admin_roles` (
  `id` int(11) NOT NULL,
  `id_admin` int(11) NOT NULL,
  `id_role` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `admin_roles`
--

INSERT INTO `admin_roles` (`id`, `id_admin`, `id_role`) VALUES
(15, 6, 1),
(9, 7, 2),
(22, 8, 2);

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `customer_notes`
--

CREATE TABLE `customer_notes` (
  `id` int(11) NOT NULL,
  `id_user` int(11) NOT NULL,
  `note` text NOT NULL,
  `created_by` varchar(100) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `danhgia`
--

CREATE TABLE `danhgia` (
  `id_danhgia` int(11) NOT NULL,
  `id_sanpham` int(11) NOT NULL,
  `id_user` int(11) NOT NULL,
  `id_donhang` int(11) NOT NULL,
  `id_chitiet` int(11) NOT NULL,
  `diemdanhgia` int(11) NOT NULL COMMENT 'Điểm từ 1-5',
  `noidung` text DEFAULT NULL,
  `hinhanh` varchar(255) DEFAULT NULL,
  `khuyen_dung` tinyint(1) DEFAULT 0 COMMENT '0: Không khuyến nghị, 1: Khuyến nghị',
  `ngaydanhgia` timestamp NOT NULL DEFAULT current_timestamp(),
  `trangthai` tinyint(1) DEFAULT 1 COMMENT '0: Ẩn, 1: Hiển thị'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `danhgia`
--

INSERT INTO `danhgia` (`id_danhgia`, `id_sanpham`, `id_user`, `id_donhang`, `id_chitiet`, `diemdanhgia`, `noidung`, `hinhanh`, `khuyen_dung`, `ngaydanhgia`, `trangthai`) VALUES
(1, 6, 6, 11, 9, 5, 'ngon, vippro', '1744015246_67f38f8ef2625.jpg', 0, '2025-04-07 08:40:46', 1),
(2, 4, 5, 9, 7, 4, 'ok', NULL, 0, '2025-04-08 08:58:09', 1),
(3, 3, 5, 9, 6, 5, 'okkkk', NULL, 0, '2025-04-08 08:58:28', 1),
(5, 3, 7, 24, 23, 5, 'ngon vippro', '1744129243_67f54cdb3e079.jpg', 0, '2025-04-08 16:20:43', 1),
(6, 6, 5, 29, 28, 4, 'quá đẹp', '1744478861_67faa28d73d57.jpg', 0, '2025-04-12 17:27:41', 1);

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `donhang`
--

CREATE TABLE `donhang` (
  `id_donhang` int(11) NOT NULL,
  `id_nguoidung` int(11) DEFAULT NULL,
  `tennguoinhan` varchar(255) NOT NULL,
  `sodienthoai` varchar(20) NOT NULL,
  `email` varchar(255) DEFAULT NULL,
  `diachi` text NOT NULL,
  `tinh_tp` varchar(100) DEFAULT NULL,
  `quan_huyen` varchar(100) DEFAULT NULL,
  `phuong_xa` varchar(100) DEFAULT NULL,
  `tongtien` decimal(12,2) DEFAULT 0.00,
  `phivanchuyen` decimal(10,2) DEFAULT 0.00,
  `phuongthucthanhtoan` varchar(50) DEFAULT 'cod',
  `ghichu` text DEFAULT NULL,
  `ngaytao` timestamp NOT NULL DEFAULT current_timestamp(),
  `ngaycapnhat` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `trangthai` int(11) DEFAULT 1 COMMENT '1: Chờ xác nhận, 2: Đang xử lý, 3: Đang giao hàng, 4: Đã giao, 5: Đã hủy, 6: Hoàn trả'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `donhang`
--

INSERT INTO `donhang` (`id_donhang`, `id_nguoidung`, `tennguoinhan`, `sodienthoai`, `email`, `diachi`, `tinh_tp`, `quan_huyen`, `phuong_xa`, `tongtien`, `phivanchuyen`, `phuongthucthanhtoan`, `ghichu`, `ngaytao`, `ngaycapnhat`, `trangthai`) VALUES
(3, 5, 'nguyen xuan thai', '0123456789', 'thai@gmail.com', 'hd', 'Bình Thuận', 'La Gi', 'Phước Lộc', 929000.00, 30000.00, 'cod', '', '2025-04-04 16:57:40', '2025-04-06 16:33:46', 5),
(6, 6, 'nguyen xuan thai', '0123456781', 'thai1@gmail.com', 'đông tiến', 'Hải Dương', 'Tứ Kỳ', 'Hưng Đạo', 42000.00, 30000.00, 'cod', ' - Đã hủy do ngừng chức năng người bán', '2025-04-05 06:45:09', '2025-04-14 02:48:28', 5),
(7, 6, 'nguyen xuan thai', '0123456781', 'thai1@gmail.com', 'đông tiến', 'Bình Thuận', 'Đức Linh', 'Trà Tân', 190000.00, 30000.00, 'cod', ' - Đã hủy do ngừng chức năng người bán', '2025-04-05 06:51:21', '2025-04-14 02:48:28', 5),
(8, 6, 'nguyen xuan thai', '0123456781', 'thai1@gmail.com', 'đông tiến', 'Bình Thuận', 'Phú Quí', 'Ngũ Phụng', 3626000.00, 30000.00, 'cod', '', '2025-04-05 06:56:11', '2025-04-05 09:01:38', 4),
(9, 5, 'nguyen xuan thai', '0123456789', 'thai@gmail.com', 'hd', 'Cần Thơ', 'Thốt Nốt', 'Thuận Hưng', 1015000.00, 30000.00, 'cod', '', '2025-04-05 07:58:55', '2025-04-08 08:57:16', 4),
(10, 6, 'nguyen xuan thai', '0123456781', 'thai1@gmail.com', 'đông tiến', 'Cao Bằng', 'Nguyên Bình', 'Tĩnh Túc', 280000.00, 30000.00, 'cod', ' - Đã hủy do ngừng chức năng người bán', '2025-04-07 06:28:57', '2025-04-14 03:19:58', 5),
(11, 6, 'nguyen xuan thai', '0123456781', 'thai1@gmail.com', 'đông tiến', 'Bình Dương', 'Phú Giáo', 'An Thái', 280000.00, 30000.00, 'cod', ' - Đã hủy do ngừng chức năng người bán', '2025-04-07 06:49:55', '2025-04-14 03:19:58', 5),
(12, 6, 'nguyen xuan thai', '0123456781', 'thai1@gmail.com', 'đông tiến', 'Bình Dương', 'Dĩ An', 'Dĩ An', 2727000.00, 30000.00, 'cod', '', '2025-04-08 03:14:08', '2025-04-08 03:14:45', 4),
(13, NULL, 'nguyen xuan thai', '0123456789', '2@gmail.com', 'hd', 'Đà Nẵng', 'Ngũ Hành Sơn', 'Hoà Quý', 780000.00, 30000.00, 'cod', '0 - Đã hủy do ngừng chức năng người bán', '2025-04-08 10:03:30', '2025-04-14 03:19:58', 5),
(14, 6, 'nguyen xuan thai', '0123456781', 'thai1@gmail.com', 'đông tiến', 'Cà Mau', 'Cái Nước', 'Đông Thới', 1030000.00, 30000.00, 'cod', ' - Đã hủy do ngừng chức năng người bán', '2025-04-08 10:06:37', '2025-04-14 03:19:58', 5),
(15, 6, 'nguyen xuan thai', '0123456781', 'thai1@gmail.com', 'đông tiến', 'Đắk Lắk', 'Krông Búk', 'Ea Ngai', 530000.00, 30000.00, 'cod', ' - Đã hủy do ngừng chức năng người bán', '2025-04-08 10:16:47', '2025-04-14 03:19:58', 5),
(16, 6, 'nguyen xuan thai', '0123456781', 'thai1@gmail.com', 'đông tiến', 'Bình Thuận', 'La Gi', 'Tân Bình', 1030000.00, 30000.00, 'cod', ' - Đã hủy do ngừng chức năng người bán', '2025-04-08 13:39:04', '2025-04-14 03:19:58', 5),
(17, 5, 'nguyen xuan thai', '0123456789', 'thai@gmail.com', 'hd', 'Cà Mau', 'Thới Bình', 'Thới Bình', 4530000.00, 30000.00, 'cod', ' - Đã hủy do ngừng chức năng người bán', '2025-04-08 13:48:18', '2025-04-14 03:19:58', 5),
(18, 5, 'nguyen xuan thai', '0123456789', 'thai@gmail.com', 'hd', 'Bình Thuận', 'Hàm Thuận Nam', 'Mỹ Thạnh', 36000.00, 30000.00, 'bank_transfer', ' - Đã hủy do ngừng chức năng người bán', '2025-04-08 15:13:03', '2025-04-14 02:48:28', 5),
(20, 5, 'nguyen xuan thai', '0123456789', 'thai@gmail.com', 'hd', 'Bình Thuận', 'Hàm Thuận Nam', 'Mỹ Thạnh', 280000.00, 30000.00, 'vnpay', ' - Đã hủy do ngừng chức năng người bán', '2025-04-08 15:50:15', '2025-04-14 02:48:28', 5),
(21, 5, 'nguyen xuan thai', '0123456789', 'thai@gmail.com', 'hd', 'Đà Nẵng', 'Liên Chiểu', 'Hòa Hiệp Nam', 36000.00, 30000.00, 'vnpay', ' - Đã hủy do ngừng chức năng người bán', '2025-04-08 16:02:28', '2025-04-14 02:48:28', 5),
(22, 5, 'nguyen xuan thai', '0123456789', 'thai@gmail.com', 'hd', 'Đà Nẵng', 'Liên Chiểu', 'Hòa Khánh Nam', 36000.00, 30000.00, 'vnpay', ' - Đã hủy do ngừng chức năng người bán', '2025-04-08 16:10:18', '2025-04-14 02:48:28', 5),
(23, 5, 'nguyen xuan thai', '0123456789', 'thai@gmail.com', 'hd', 'Đắk Lắk', 'Krông Năng', 'Ea Tóh', 530000.00, 30000.00, 'vnpay', ' - Đã hủy do ngừng chức năng người bán', '2025-04-08 16:11:54', '2025-04-14 02:48:28', 5),
(24, 7, 'nguyen xuan thai3', '0123456782', 'thai3@gmail.com', 'hn', 'Cao Bằng', 'Quảng Hòa', 'Quảng Hưng', 36000.00, 30000.00, 'vnpay', '', '2025-04-08 16:18:11', '2025-04-08 16:20:10', 4),
(25, 7, 'nguyen xuan thai3', '0123456782', 'thai3@gmail.com', 'hn', 'Đắk Nông', 'Krông Nô', 'Nâm Nung', 230000.00, 30000.00, 'vnpay', ' - Đã hủy do ngừng chức năng người bán', '2025-04-09 05:42:09', '2025-04-14 02:48:28', 5),
(26, 6, 'nguyen xuan thai', '0123456781', 'thai1@gmail.com', 'đông tiến', 'Đắk Lắk', 'Krông Năng', 'Krông Năng', 230000.00, 30000.00, 'vnpay', ' - Đã hủy do ngừng chức năng người bán', '2025-04-09 10:02:19', '2025-04-14 03:19:58', 5),
(27, NULL, 'lò vi sóng', '0876429972', 'song@gmail.com', 'xóm làng', 'Đà Nẵng', 'Ngũ Hành Sơn', 'Khuê Mỹ', 530000.00, 30000.00, 'vnpay', '0 - Đã hủy do ngừng chức năng người bán', '2025-04-09 15:31:25', '2025-04-14 02:48:28', 5),
(28, 5, 'nguyen xuan thai', '0123456789', 'thai@gmail.com', 'đông tiến', 'Hải Dương', 'Tứ Kỳ', 'Hưng Đạo', 280000.00, 30000.00, 'vnpay', ' - Đã hủy do ngừng chức năng người bán', '2025-04-12 17:11:39', '2025-04-14 02:48:28', 5),
(29, 5, 'nguyen xuan thai', '0123456789', 'thai@gmail.com', '13/04 12:14', 'Bắc Kạn', 'Chợ Mới', 'Nông Hạ', 30000.00, 30000.00, 'vnpay', ' - Đã hủy do ngừng chức năng người bán', '2025-04-12 17:14:47', '2025-04-14 03:19:58', 5),
(30, 7, 'nguyen xuan thai3', '0123456782', 'thai3@gmail.com', 'làng xóm', 'Bến Tre', 'Chợ Lách', 'Phú Phụng', 36000.00, 30000.00, 'cod', '', '2025-04-13 08:16:40', '2025-04-13 08:28:21', 5),
(31, 7, 'nguyen xuan thai3', '0123456782', 'thai3@gmail.com', 'làng xóm', 'Đà Nẵng', 'Liên Chiểu', 'Hòa Hiệp Nam', 36000.00, 30000.00, 'cod', ' - Đã hủy do ngừng chức năng người bán', '2025-04-13 08:24:51', '2025-04-14 02:48:28', 5),
(32, 7, 'nguyen xuan thai3', '0123456782', 'thai3@gmail.com', 'làng xóm', 'Đắk Lắk', 'Krông Năng', 'Ea Tam', 280000.00, 30000.00, 'cod', 'test - Đã hủy do ngừng chức năng người bán', '2025-04-13 08:28:04', '2025-04-14 03:19:58', 5),
(33, 6, 'nguyen xuan thai', '0123456781', 'thai1@gmail.com', 'đông tiến', 'Đà Nẵng', 'Sơn Trà', 'Nại Hiên Đông', 530000.00, 30000.00, 'cod', '', '2025-04-14 03:37:19', '2025-04-14 03:37:36', 2);

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `donhang_chitiet`
--

CREATE TABLE `donhang_chitiet` (
  `id_chitiet` int(11) NOT NULL,
  `id_donhang` int(11) NOT NULL,
  `id_sanpham` int(11) NOT NULL,
  `id_kichthuoc` int(11) DEFAULT NULL,
  `id_mausac` int(11) DEFAULT NULL,
  `soluong` int(11) NOT NULL DEFAULT 1,
  `gia` decimal(12,2) NOT NULL,
  `thanh_tien` decimal(12,2) NOT NULL,
  `ngaytao` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `donhang_chitiet`
--

INSERT INTO `donhang_chitiet` (`id_chitiet`, `id_donhang`, `id_sanpham`, `id_kichthuoc`, `id_mausac`, `soluong`, `gia`, `thanh_tien`, `ngaytao`) VALUES
(1, 3, 4, NULL, NULL, 1, 0.00, 899000.00, '2025-04-04 16:57:40'),
(2, 6, 3, 6, 6, 2, 6000.00, 12000.00, '2025-04-05 06:45:09'),
(3, 7, 2, 10, 6, 2, 80000.00, 160000.00, '2025-04-05 06:51:21'),
(4, 8, 4, 7, 1, 4, 899000.00, 3596000.00, '2025-04-05 06:56:11'),
(5, 9, 2, NULL, NULL, 1, 80000.00, 80000.00, '2025-04-05 07:58:55'),
(6, 9, 3, NULL, NULL, 1, 6000.00, 6000.00, '2025-04-05 07:58:55'),
(7, 9, 4, NULL, NULL, 1, 899000.00, 899000.00, '2025-04-05 07:58:55'),
(8, 10, 6, 7, 7, 1, 250000.00, 250000.00, '2025-04-07 06:28:57'),
(9, 11, 6, 7, 8, 1, 250000.00, 250000.00, '2025-04-07 06:49:55'),
(10, 12, 4, 7, 2, 3, 899000.00, 2697000.00, '2025-04-08 03:14:08'),
(11, 13, 6, 10, 10, 3, 250000.00, 750000.00, '2025-04-08 10:03:30'),
(12, 14, 6, 1, 7, 4, 250000.00, 1000000.00, '2025-04-08 10:06:37'),
(13, 15, 6, 1, 7, 2, 250000.00, 500000.00, '2025-04-08 10:16:47'),
(14, 16, 5, 8, 8, 1, 500000.00, 500000.00, '2025-04-08 13:39:04'),
(15, 16, 5, 8, 4, 1, 500000.00, 500000.00, '2025-04-08 13:39:04'),
(16, 17, 5, 3, 2, 9, 500000.00, 4500000.00, '2025-04-08 13:48:18'),
(17, 18, 3, 7, 2, 1, 6000.00, 6000.00, '2025-04-08 15:13:03'),
(19, 20, 6, 1, 7, 1, 250000.00, 250000.00, '2025-04-08 15:50:15'),
(20, 21, 3, 7, 2, 1, 6000.00, 6000.00, '2025-04-08 16:02:28'),
(21, 22, 3, 4, 2, 1, 6000.00, 6000.00, '2025-04-08 16:10:18'),
(22, 23, 5, 6, 2, 1, 500000.00, 500000.00, '2025-04-08 16:11:54'),
(23, 24, 3, 2, 2, 1, 6000.00, 6000.00, '2025-04-08 16:18:11'),
(24, 25, 6, 2, 2, 1, 250000.00, 250000.00, '2025-04-09 05:42:09'),
(25, 26, 6, 1, 9, 1, 250000.00, 250000.00, '2025-04-09 10:02:19'),
(26, 27, 5, 3, 2, 1, 500000.00, 500000.00, '2025-04-09 15:31:25'),
(27, 28, 6, 2, 7, 1, 250000.00, 250000.00, '2025-04-12 17:11:39'),
(28, 29, 6, 1, 7, 1, 250000.00, 250000.00, '2025-04-12 17:14:47'),
(29, 30, 3, 1, 2, 1, 6000.00, 6000.00, '2025-04-13 08:16:40'),
(30, 31, 3, 10, 6, 1, 6000.00, 6000.00, '2025-04-13 08:24:51'),
(31, 32, 6, 1, 9, 1, 250000.00, 250000.00, '2025-04-13 08:28:04'),
(32, 33, 6, 6, 4, 1, 250000.00, 250000.00, '2025-04-14 03:37:19'),
(33, 33, 6, 1, 4, 1, 250000.00, 250000.00, '2025-04-14 03:37:19');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `donhang_lichsu`
--

CREATE TABLE `donhang_lichsu` (
  `id` int(11) NOT NULL,
  `id_donhang` int(11) NOT NULL,
  `hanh_dong` varchar(255) NOT NULL,
  `nguoi_thuchien` varchar(100) NOT NULL,
  `ghi_chu` text DEFAULT NULL,
  `ngay_thaydoi` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `donhang_lichsu`
--

INSERT INTO `donhang_lichsu` (`id`, `id_donhang`, `hanh_dong`, `nguoi_thuchien`, `ghi_chu`, `ngay_thaydoi`) VALUES
(1, 9, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đang xử lý\" sang \"Đang xử lý\"', '2025-04-05 08:09:38'),
(2, 9, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đang xử lý\" sang \"Đang xử lý\"', '2025-04-05 08:32:23'),
(3, 9, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đã giao\" sang \"Đã giao\"', '2025-04-05 08:32:27'),
(4, 9, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đang xử lý\" sang \"Đang xử lý\"', '2025-04-05 08:32:35'),
(5, 9, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đã giao\" sang \"Đã giao\"', '2025-04-05 08:35:23'),
(6, 8, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đã giao\" sang \"Đã giao\"', '2025-04-05 09:01:38'),
(7, 9, 'Cập nhật trạng thái', 'thai-mng1', 'Thay đổi trạng thái từ \"Chờ xác nhận\" sang \"Chờ xác nhận\"', '2025-04-06 16:50:05'),
(8, 11, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Chờ xác nhận\" sang \"Đang xử lý\"', '2025-04-07 06:59:32'),
(9, 11, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang xử lý\" sang \"Đang giao hàng\"', '2025-04-07 07:00:03'),
(10, 11, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang giao hàng\" sang \"Đã giao\"', '2025-04-07 07:01:16'),
(11, 12, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đã giao\" sang \"Đã giao\"', '2025-04-08 03:14:45'),
(12, 10, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Chờ xác nhận\" sang \"Đang xử lý\"', '2025-04-08 08:54:06'),
(13, 10, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang xử lý\" sang \"Đang giao hàng\"', '2025-04-08 08:54:10'),
(14, 10, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang giao hàng\" sang \"Đã giao\"', '2025-04-08 08:54:14'),
(15, 9, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đã giao\" sang \"Đã giao\"', '2025-04-08 08:57:16'),
(16, 13, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Chờ xác nhận\" sang \"Đang xử lý\"', '2025-04-08 10:04:15'),
(17, 13, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang xử lý\" sang \"Đang giao hàng\"', '2025-04-08 10:04:18'),
(18, 13, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang giao hàng\" sang \"Đã giao\"', '2025-04-08 10:04:21'),
(19, 14, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đã giao\" sang \"Đã giao\"', '2025-04-08 10:06:56'),
(20, 15, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đã giao\" sang \"Đã giao\"', '2025-04-08 10:17:10'),
(21, 15, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đã giao\" sang \"Đã giao\"', '2025-04-08 10:17:12'),
(22, 16, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Chờ xác nhận\" sang \"Đang xử lý\"', '2025-04-08 13:41:07'),
(23, 16, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang xử lý\" sang \"Đang giao hàng\"', '2025-04-08 13:41:10'),
(24, 16, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang giao hàng\" sang \"Đã giao\"', '2025-04-08 13:41:13'),
(25, 17, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Chờ xác nhận\" sang \"Đang xử lý\"', '2025-04-08 13:48:44'),
(26, 17, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang xử lý\" sang \"Đang giao hàng\"', '2025-04-08 13:48:48'),
(27, 17, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang giao hàng\" sang \"Đã giao\"', '2025-04-08 13:48:50'),
(29, 20, 'Thanh toán VNPAY thành công', 'Hệ thống', 'Thanh toán qua VNPAY với mã giao dịch: 14896342', '2025-04-08 15:52:08'),
(30, 22, 'Thanh toán VNPAY thất bại', 'Hệ thống', 'Thanh toán qua VNPAY thất bại với mã giao dịch: 0. Mã lỗi: 24', '2025-04-08 16:11:05'),
(31, 23, 'Thanh toán VNPAY thành công', 'Hệ thống', 'Thanh toán qua VNPAY với mã giao dịch: 14896396', '2025-04-08 16:12:37'),
(32, 24, 'Thanh toán VNPAY thành công', 'Hệ thống', 'Thanh toán qua VNPAY với mã giao dịch: 14896418', '2025-04-08 16:19:06'),
(33, 24, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đã giao\" sang \"Đã giao\"', '2025-04-08 16:20:10'),
(34, 25, 'Thanh toán VNPAY thành công', 'Hệ thống', 'Thanh toán qua VNPAY với mã giao dịch: 14897211', '2025-04-09 05:43:10'),
(35, 26, 'Thanh toán VNPAY thất bại', 'Hệ thống', 'Thanh toán qua VNPAY thất bại với mã giao dịch: 0. Mã lỗi: 24', '2025-04-09 10:02:32'),
(36, 27, 'Thanh toán VNPAY thành công', 'Hệ thống', 'Thanh toán qua VNPAY với mã giao dịch: 14898522', '2025-04-09 15:32:04'),
(37, 26, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Chờ xác nhận\" sang \"Đang xử lý\"', '2025-04-12 13:49:05'),
(38, 26, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang xử lý\" sang \"Đang giao hàng\"', '2025-04-12 13:49:15'),
(39, 26, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang giao hàng\" sang \"Đã giao\"', '2025-04-12 13:49:18'),
(40, 26, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đã giao\" sang \"Hoàn trả\"', '2025-04-12 13:49:34'),
(41, 29, 'Thanh toán VNPAY thành công', 'Hệ thống', 'Thanh toán qua VNPAY với mã giao dịch: 14904486', '2025-04-12 17:16:04'),
(42, 29, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang xử lý\" sang \"Đang giao hàng\"', '2025-04-12 17:25:06'),
(43, 29, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang giao hàng\" sang \"Đã giao\"', '2025-04-12 17:25:41'),
(44, 29, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đã giao\" sang \"Hoàn trả\"', '2025-04-12 17:25:48'),
(45, 29, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Chờ xác nhận\" sang \"Chờ xác nhận\"', '2025-04-12 17:26:08'),
(46, 29, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Chờ xác nhận\" sang \"Đang xử lý\"', '2025-04-12 17:26:18'),
(47, 29, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang xử lý\" sang \"Đang giao hàng\"', '2025-04-12 17:26:24'),
(48, 29, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đang giao hàng\" sang \"Đã giao\"', '2025-04-12 17:26:27'),
(49, 29, 'Cập nhật trạng thái', 'nguyen xuan thai (Shop: )', 'Thay đổi trạng thái từ \"Đã giao\" sang \"Hoàn trả\"', '2025-04-12 17:28:55'),
(50, 32, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đã giao\" sang \"Đã giao\"', '2025-04-13 09:49:31'),
(51, 32, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đã giao\" sang \"Đã giao\"', '2025-04-13 10:03:23'),
(52, 32, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đã giao\" sang \"Đã giao\"', '2025-04-13 10:04:02'),
(53, 33, 'Cập nhật trạng thái', 'Super Administrator', 'Thay đổi trạng thái từ \"Đang xử lý\" sang \"Đang xử lý\"', '2025-04-14 03:37:36');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `giohang`
--

CREATE TABLE `giohang` (
  `id_giohang` int(11) NOT NULL,
  `id_nguoidung` int(11) DEFAULT NULL COMMENT 'NULL nếu khách chưa đăng nhập',
  `session_id` varchar(255) NOT NULL COMMENT 'ID phiên cho khách chưa đăng nhập',
  `tong_tien` decimal(10,0) DEFAULT 0,
  `ngay_tao` datetime NOT NULL DEFAULT current_timestamp(),
  `ngay_capnhat` datetime DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `giohang`
--

INSERT INTO `giohang` (`id_giohang`, `id_nguoidung`, `session_id`, `tong_tien`, `ngay_tao`, `ngay_capnhat`) VALUES
(1, NULL, 'o3mrftt8ckanevesf9olebrf3o', 0, '2025-04-04 15:34:22', '2025-04-04 17:06:24'),
(2, 5, 'o3mrftt8ckanevesf9olebrf3o', 250000, '2025-04-04 16:22:18', '2025-04-13 00:13:00'),
(3, NULL, 'd8nf54gmco3peoon627ep5ftl8', 0, '2025-04-04 20:26:35', NULL),
(4, NULL, 'p9t5a7rpgbq8k29qitbn95sgld', 0, '2025-04-05 10:54:55', '2025-04-05 11:18:03'),
(5, NULL, 'u1u913kc1v6oqfgrbjuqu22r0h', 0, '2025-04-05 12:29:11', '2025-04-05 13:11:55'),
(6, 6, 'u1u913kc1v6oqfgrbjuqu22r0h', 500000, '2025-04-05 12:35:24', '2025-04-14 10:36:55'),
(7, NULL, '5v6p2fjhdecv6tc1opij9loe4d', 0, '2025-04-05 14:58:25', NULL),
(8, NULL, 'dbojvncrnpvapgbh3lj72mno9c', 0, '2025-04-06 19:40:38', NULL),
(9, NULL, 'roqk7319mq854urtkk3f1u114s', 0, '2025-04-07 13:28:41', NULL),
(10, NULL, 'oe6vh7l5su2uhqc6s0g8n8h3c2', 0, '2025-04-08 10:13:57', NULL),
(11, NULL, 'gopvu0056573166ursoksmdqpi', 750000, '2025-04-08 17:02:56', '2025-04-08 17:02:56'),
(12, NULL, '06qsv48rvq79inlhg6hhgv2ngn', 0, '2025-04-08 20:38:52', NULL),
(13, NULL, 'v9jtolifsslds1a3t5062tugqv', 0, '2025-04-08 22:11:42', NULL),
(14, 7, '06qsv48rvq79inlhg6hhgv2ngn', 256000, '2025-04-08 23:17:51', '2025-04-13 15:16:20'),
(15, NULL, '83mi6cfkhtadarr1t226s92scq', 0, '2025-04-09 10:55:00', NULL),
(16, NULL, '168ns444dluvq01g4pf4a3nlte', 250000, '2025-04-09 14:19:06', '2025-04-09 14:19:06'),
(17, NULL, 'j5sqrmcq82bbgcup09qu55ddqm', 0, '2025-04-09 17:01:20', NULL),
(18, NULL, 'scbi36qs4aouj86uvf4qsnkqdg', 0, '2025-04-09 19:50:56', NULL),
(19, NULL, 'nc05o28dp2elcvk26qpgerfmbo', 0, '2025-04-10 15:09:15', NULL),
(20, NULL, '90c5l93o9mnnvq1pjff5s9fhcl', 0, '2025-04-12 08:17:54', NULL),
(21, NULL, 'rfapdnlino5balg2jibtvej59v', 0, '2025-04-12 23:18:38', NULL),
(22, NULL, '7hgrm571nos3k92ombg6md1c42', 0, '2025-04-13 15:15:08', NULL),
(23, NULL, '83075cb1gjjgv9pvmh6qhmg1ea', 0, '2025-04-14 10:36:58', NULL);

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `giohang_chitiet`
--

CREATE TABLE `giohang_chitiet` (
  `id_chitiet` int(11) NOT NULL,
  `id_giohang` int(11) NOT NULL,
  `id_sanpham` int(11) NOT NULL,
  `id_kichthuoc` int(11) DEFAULT NULL,
  `id_mausac` int(11) DEFAULT NULL,
  `soluong` int(11) NOT NULL DEFAULT 1,
  `gia` decimal(10,0) NOT NULL COMMENT 'Giá tại thời điểm thêm vào giỏ',
  `thanh_tien` decimal(10,0) NOT NULL COMMENT 'Thành tiền = giá × số lượng',
  `ngay_them` datetime NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `giohang_chitiet`
--

INSERT INTO `giohang_chitiet` (`id_chitiet`, `id_giohang`, `id_sanpham`, `id_kichthuoc`, `id_mausac`, `soluong`, `gia`, `thanh_tien`, `ngay_them`) VALUES
(34, 16, 6, 1, 7, 1, 250000, 250000, '2025-04-09 14:19:06');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `hoantra`
--

CREATE TABLE `hoantra` (
  `id_hoantra` int(11) NOT NULL,
  `id_donhang` int(11) NOT NULL,
  `id_sanpham` int(11) NOT NULL,
  `id_nguoidung` int(11) NOT NULL,
  `lydo` varchar(255) NOT NULL,
  `mota_chitiet` text NOT NULL,
  `trangthai` tinyint(1) NOT NULL DEFAULT 1,
  `phan_hoi` text DEFAULT NULL,
  `ngaytao` datetime NOT NULL,
  `ngaycapnhat` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `hoantra`
--

INSERT INTO `hoantra` (`id_hoantra`, `id_donhang`, `id_sanpham`, `id_nguoidung`, `lydo`, `mota_chitiet`, `trangthai`, `phan_hoi`, `ngaytao`, `ngaycapnhat`) VALUES
(1, 32, 6, 7, 'Sản phẩm bị lỗi/hỏng', 'test trả hàng', 2, '', '2025-04-13 17:03:57', '2025-04-13 10:15:07');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `khuyen_mai`
--

CREATE TABLE `khuyen_mai` (
  `id` int(11) NOT NULL,
  `ma_code` varchar(50) NOT NULL,
  `loai_giam_gia` tinyint(1) NOT NULL COMMENT '1: Phần trăm, 2: Số tiền cố định',
  `gia_tri` decimal(10,2) NOT NULL,
  `ngay_bat_dau` datetime NOT NULL,
  `ngay_ket_thuc` datetime NOT NULL,
  `so_luong` int(11) NOT NULL DEFAULT 1,
  `so_luong_da_dung` int(11) NOT NULL DEFAULT 0,
  `gia_tri_don_toi_thieu` decimal(10,2) NOT NULL DEFAULT 0.00,
  `gia_tri_giam_toi_da` decimal(10,2) NOT NULL DEFAULT 0.00,
  `mo_ta` text DEFAULT NULL,
  `id_nguoiban` int(11) NOT NULL COMMENT 'ID quản trị viên tạo mã',
  `ap_dung_sanpham` tinyint(1) NOT NULL DEFAULT 0 COMMENT '0: Áp dụng tất cả sản phẩm, 1: Áp dụng sản phẩm cụ thể',
  `ap_dung_loai` tinyint(1) NOT NULL DEFAULT 0 COMMENT '0: Không áp dụng theo loại, 1: Áp dụng theo loại',
  `trang_thai` tinyint(1) NOT NULL DEFAULT 1 COMMENT '0: Không kích hoạt, 1: Đang hoạt động, 2: Hết hạn',
  `ngay_tao` timestamp NOT NULL DEFAULT current_timestamp(),
  `ngay_capnhat` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `khuyen_mai`
--

INSERT INTO `khuyen_mai` (`id`, `ma_code`, `loai_giam_gia`, `gia_tri`, `ngay_bat_dau`, `ngay_ket_thuc`, `so_luong`, `so_luong_da_dung`, `gia_tri_don_toi_thieu`, `gia_tri_giam_toi_da`, `mo_ta`, `id_nguoiban`, `ap_dung_sanpham`, `ap_dung_loai`, `trang_thai`, `ngay_tao`, `ngay_capnhat`) VALUES
(1, 'TEST1', 1, 20.00, '2025-04-09 00:00:00', '2025-04-10 00:00:00', 12, 8, 0.00, 99999999.00, '', 6, 1, 0, 1, '2025-04-09 04:07:08', '2025-04-13 09:02:04'),
(3, 'TESTADMIN1', 1, 50.00, '2025-04-09 00:00:00', '2025-05-10 00:00:00', 99, 0, 0.00, 10000000.00, '', 6, 0, 0, 1, '2025-04-09 13:11:48', NULL),
(5, 'TESTMNG1', 1, 50.00, '2025-04-10 00:00:00', '2025-04-11 00:00:00', 5, 0, 0.00, 99999999.00, 'test', 6, 0, 0, 1, '2025-04-10 14:01:54', '2025-04-14 03:19:58'),
(6, 'TESTADMIN2', 1, 100.00, '2025-04-12 00:00:00', '2025-05-12 00:00:00', 99, 1, 0.00, 10000000.00, '', 6, 0, 0, 1, '2025-04-12 17:13:44', '2025-04-12 17:14:47');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `khuyen_mai_lichsu`
--

CREATE TABLE `khuyen_mai_lichsu` (
  `id` int(11) NOT NULL,
  `id_khuyen_mai` int(11) NOT NULL,
  `id_donhang` int(11) NOT NULL,
  `id_nguoidung` int(11) NOT NULL,
  `gia_tri_giam` decimal(10,2) NOT NULL,
  `ngay_su_dung` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `khuyen_mai_lichsu`
--

INSERT INTO `khuyen_mai_lichsu` (`id`, `id_khuyen_mai`, `id_donhang`, `id_nguoidung`, `gia_tri_giam`, `ngay_su_dung`) VALUES
(1, 1, 25, 7, 50000.00, '2025-04-09 05:42:09'),
(2, 1, 26, 6, 50000.00, '2025-04-09 10:02:19'),
(3, 6, 29, 5, 250000.00, '2025-04-12 17:14:47');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `khuyen_mai_loai`
--

CREATE TABLE `khuyen_mai_loai` (
  `id` int(11) NOT NULL,
  `id_khuyen_mai` int(11) NOT NULL,
  `id_loai` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `khuyen_mai_sanpham`
--

CREATE TABLE `khuyen_mai_sanpham` (
  `id` int(11) NOT NULL,
  `id_khuyen_mai` int(11) NOT NULL,
  `id_sanpham` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `khuyen_mai_sanpham`
--

INSERT INTO `khuyen_mai_sanpham` (`id`, `id_khuyen_mai`, `id_sanpham`) VALUES
(1, 1, 6);

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `kichthuoc`
--

CREATE TABLE `kichthuoc` (
  `id_kichthuoc` int(11) NOT NULL,
  `tenkichthuoc` varchar(20) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `kichthuoc`
--

INSERT INTO `kichthuoc` (`id_kichthuoc`, `tenkichthuoc`) VALUES
(1, '36'),
(2, '37'),
(3, '38'),
(4, '39'),
(5, '40'),
(6, '41'),
(7, '42'),
(8, '43'),
(9, '44'),
(10, '45');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `loaisanpham`
--

CREATE TABLE `loaisanpham` (
  `id_loai` int(11) NOT NULL,
  `tenloai` varchar(100) NOT NULL,
  `mota` text DEFAULT NULL,
  `hinhanh` varchar(200) DEFAULT NULL,
  `trangthai` tinyint(1) NOT NULL DEFAULT 1 COMMENT '0: Ẩn, 1: Hiển thị'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `loaisanpham`
--

INSERT INTO `loaisanpham` (`id_loai`, `tenloai`, `mota`, `hinhanh`, `trangthai`) VALUES
(1, 'Giày Nam', 'Các loại giày dành cho nam giới', '67f2a2d8d8461_1743954648.jpg', 1),
(2, 'Giày Nữ', 'Các loại giày dành cho nữ giới', '67f2a35d1ad04_1743954781.jpg', 1),
(3, 'Giày Thể Thao', 'Giày dành cho các hoạt động thể thao', '67f2a3e038e7b_1743954912.jpg', 1),
(4, 'Giày Thời Trang', 'Giày thiết kế theo xu hướng thời trang', '67f2a52e1a515_1743955246.png', 1),
(5, 'Giày Trẻ Em', 'Giày dành cho trẻ em các lứa tuổi', '67f2a58ca128a_1743955340.jpg', 1),
(6, 'Dép', 'dép đi cho thoáng', '67f74ea98d8c0_1744260777.jpg', 1);

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `mausac`
--

CREATE TABLE `mausac` (
  `id_mausac` int(11) NOT NULL,
  `tenmau` varchar(50) NOT NULL,
  `mamau` varchar(20) DEFAULT NULL COMMENT 'Mã màu HEX (#RRGGBB)',
  `trangthai` tinyint(1) NOT NULL DEFAULT 1,
  `id_nguoithem` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `mausac`
--

INSERT INTO `mausac` (`id_mausac`, `tenmau`, `mamau`, `trangthai`, `id_nguoithem`) VALUES
(1, 'Đen', '#000000', 1, NULL),
(2, 'Trắng', '#FFFFFF', 1, NULL),
(3, 'Đỏ', '#FF0000', 1, NULL),
(4, 'Xanh dương', '#0000FF', 1, NULL),
(5, 'Xanh lá', '#00FF00', 1, NULL),
(6, 'Vàng', '#FFFF00', 1, NULL),
(7, 'Cam', '#FFA500', 1, NULL),
(8, 'Xám', '#808080', 1, NULL),
(9, 'xanh', '#0008ff', 1, NULL),
(10, 'hồng', '#ec659b', 1, NULL),
(11, 'tím', '#563d7c', 1, 6);

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `mausac_hinhanh`
--

CREATE TABLE `mausac_hinhanh` (
  `id` int(11) NOT NULL,
  `id_sanpham` int(11) NOT NULL,
  `id_mausac` int(11) NOT NULL,
  `hinhanh` varchar(255) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `mausac_hinhanh`
--

INSERT INTO `mausac_hinhanh` (`id`, `id_sanpham`, `id_mausac`, `hinhanh`) VALUES
(1, 1, 10, '1743750266_67ef847ad139e_10.jpg'),
(2, 1, 2, '1743750266_67ef847ad1a27_2.jpg'),
(3, 2, 10, '1743749100_67ef7fec317c7_10.jpg'),
(4, 2, 6, '1743749100_67ef7fec31d2c_6.jpg'),
(5, 1, 6, '1743750266_67ef847ad2202_6.jpg');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `permissions`
--

CREATE TABLE `permissions` (
  `id_permission` int(11) NOT NULL,
  `ten_permission` varchar(100) NOT NULL,
  `ma_permission` varchar(100) NOT NULL,
  `mo_ta` text DEFAULT NULL,
  `nhom_permission` varchar(100) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `permissions`
--

INSERT INTO `permissions` (`id_permission`, `ten_permission`, `ma_permission`, `mo_ta`, `nhom_permission`) VALUES
(1, 'Xem sản phẩm', 'product_view', 'Xem danh sách và chi tiết sản phẩm', 'products'),
(2, 'Thêm sản phẩm', 'product_add', 'Thêm sản phẩm mới', 'products'),
(3, 'Sửa sản phẩm', 'product_edit', 'Chỉnh sửa thông tin sản phẩm', 'products'),
(4, 'Xóa sản phẩm', 'product_delete', 'Xóa sản phẩm', 'products'),
(5, 'Xem danh mục', 'category_view', 'Xem danh sách danh mục', 'categories'),
(6, 'Thêm danh mục', 'category_add', 'Thêm danh mục mới', 'categories'),
(7, 'Sửa danh mục', 'category_edit', 'Chỉnh sửa thông tin danh mục', 'categories'),
(8, 'Xóa danh mục', 'category_delete', 'Xóa danh mục', 'categories'),
(9, 'Xem đơn hàng', 'order_view', 'Xem danh sách và chi tiết đơn hàng', 'orders'),
(10, 'Cập nhật trạng thái đơn hàng', 'order_update_status', 'Thay đổi trạng thái đơn hàng', 'orders'),
(11, 'Hủy đơn hàng', 'order_cancel', 'Hủy đơn hàng', 'orders'),
(12, 'Xóa đơn hàng', 'order_delete', 'Xóa đơn hàng khỏi hệ thống', 'orders'),
(13, 'Xem khách hàng', 'customer_view', 'Xem danh sách và thông tin khách hàng', 'customers'),
(14, 'Thêm khách hàng', 'customer_add', 'Thêm khách hàng mới', 'customers'),
(15, 'Sửa khách hàng', 'customer_edit', 'Chỉnh sửa thông tin khách hàng', 'customers'),
(16, 'Xóa khách hàng', 'customer_delete', 'Xóa khách hàng', 'customers'),
(17, 'Khóa/mở khóa khách hàng', 'customer_toggle_status', 'Thay đổi trạng thái khóa của khách hàng', 'customers'),
(18, 'Xem admin', 'admin_view', 'Xem danh sách và thông tin admin', 'admins'),
(19, 'Thêm admin', 'admin_add', 'Thêm tài khoản admin mới', 'admins'),
(20, 'Sửa admin', 'admin_edit', 'Chỉnh sửa thông tin admin', 'admins'),
(21, 'Xóa admin', 'admin_delete', 'Xóa tài khoản admin', 'admins'),
(22, 'Xem vai trò và quyền hạn', 'role_view', 'Xem danh sách vai trò và quyền hạn', 'permissions'),
(23, 'Thêm vai trò', 'role_add', 'Thêm vai trò mới', 'permissions'),
(24, 'Sửa vai trò', 'role_edit', 'Chỉnh sửa thông tin vai trò', 'permissions'),
(25, 'Xóa vai trò', 'role_delete', 'Xóa vai trò', 'permissions'),
(26, 'Phân quyền', 'permission_assign', 'Phân quyền cho vai trò', 'permissions'),
(27, 'Xem thống kê', 'report_view', 'Xem các báo cáo thống kê', 'reports'),
(28, 'Xuất báo cáo', 'report_export', 'Xuất báo cáo', 'reports'),
(29, 'Quản lý cài đặt', 'setting_manage', 'Quản lý cài đặt hệ thống', 'settings'),
(30, 'Xem nhật ký hoạt động', 'log_view', 'Xem nhật ký hoạt động của hệ thống', 'settings'),
(31, 'Xem khuyến mãi', 'promo_view', 'Quyền xem và quản lý mã khuyến mãi', 'promos'),
(34, 'Xem khuyến mãi', 'promotion_view', 'Quyền xem và quản lý khuyến mãi', 'promotions'),
(35, 'Thêm khuyến mãi', 'promo_add', 'Quyền thêm mã khuyến mãi mới', 'promos'),
(36, 'Sửa khuyến mãi', 'promo_edit', 'Quyền chỉnh sửa mã khuyến mãi', 'promos'),
(37, 'Xóa khuyến mãi', 'promo_delete', 'Quyền xóa mã khuyến mãi', 'promos');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `roles`
--

CREATE TABLE `roles` (
  `id_role` int(11) NOT NULL,
  `ten_role` varchar(100) NOT NULL,
  `mo_ta` text DEFAULT NULL,
  `ngay_tao` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `roles`
--

INSERT INTO `roles` (`id_role`, `ten_role`, `mo_ta`, `ngay_tao`) VALUES
(1, 'Admin', 'Toàn quyền quản trị hệ thống', '2025-04-06 13:23:57'),
(2, 'Quản lý', 'Quản lý hoạt động hàng ngày, không có quyền hệ thống', '2025-04-06 13:23:57');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `role_permissions`
--

CREATE TABLE `role_permissions` (
  `id` int(11) NOT NULL,
  `id_role` int(11) NOT NULL,
  `id_permission` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `role_permissions`
--

INSERT INTO `role_permissions` (`id`, `id_role`, `id_permission`) VALUES
(83, 1, 1),
(80, 1, 2),
(82, 1, 3),
(81, 1, 4),
(68, 1, 5),
(65, 1, 6),
(67, 1, 7),
(66, 1, 8),
(78, 1, 9),
(77, 1, 10),
(75, 1, 11),
(76, 1, 12),
(73, 1, 13),
(69, 1, 14),
(71, 1, 15),
(70, 1, 16),
(72, 1, 17),
(64, 1, 18),
(61, 1, 19),
(63, 1, 20),
(62, 1, 21),
(89, 1, 22),
(86, 1, 23),
(88, 1, 24),
(87, 1, 25),
(79, 1, 26),
(85, 1, 27),
(84, 1, 28),
(90, 1, 29),
(74, 1, 30),
(105, 1, 31),
(92, 2, 1),
(93, 2, 2),
(94, 2, 3),
(95, 2, 4),
(96, 2, 5),
(97, 2, 6),
(98, 2, 7),
(99, 2, 9),
(100, 2, 10),
(101, 2, 11),
(102, 2, 13),
(103, 2, 15),
(104, 2, 27),
(106, 2, 31),
(107, 2, 35),
(108, 2, 36),
(109, 2, 37);

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `sanpham`
--

CREATE TABLE `sanpham` (
  `id_sanpham` int(11) NOT NULL,
  `tensanpham` varchar(200) NOT NULL,
  `id_loai` int(11) NOT NULL,
  `gia` decimal(10,0) NOT NULL,
  `giagoc` decimal(10,0) DEFAULT NULL,
  `mota` text DEFAULT NULL,
  `hinhanh` varchar(200) DEFAULT NULL,
  `hinhanh_phu` text DEFAULT NULL COMMENT 'Lưu các URL hình phụ, phân cách bởi dấu |',
  `soluong` int(11) NOT NULL DEFAULT 0,
  `luotxem` int(11) DEFAULT 0,
  `noibat` tinyint(1) DEFAULT 0 COMMENT '0: Không nổi bật, 1: Nổi bật',
  `id_thuonghieu` int(11) DEFAULT NULL,
  `diemdanhgia_tb` float DEFAULT 0 COMMENT 'Điểm đánh giá trung bình (1-5 sao)',
  `soluong_danhgia` int(11) DEFAULT 0 COMMENT 'Số lượng đánh giá',
  `trangthai` tinyint(1) DEFAULT 1 COMMENT '0: Hết hàng, 1: Còn hàng, 2: Ngừng kinh doanh',
  `ngaytao` timestamp NOT NULL DEFAULT current_timestamp(),
  `ngaycapnhat` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `sanpham`
--

INSERT INTO `sanpham` (`id_sanpham`, `tensanpham`, `id_loai`, `gia`, `giagoc`, `mota`, `hinhanh`, `hinhanh_phu`, `soluong`, `luotxem`, `noibat`, `id_thuonghieu`, `diemdanhgia_tb`, `soluong_danhgia`, `trangthai`, `ngaytao`, `ngaycapnhat`) VALUES
(2, 'giày', 1, 80000, 100000, '0', '1743748994_67ef7f8257788.jpg', NULL, 36, 24, 0, NULL, NULL, 0, 1, '2025-04-04 06:43:14', '2025-04-14 03:44:40'),
(3, 'dép tổ ong', 6, 6000, 10000, '0', '1743752855_67ef8e9747103.jpg', NULL, 593, 24, 0, NULL, 5, 2, 1, '2025-04-04 07:47:35', '2025-04-13 08:20:37'),
(4, 'guốc', 2, 899000, 1000000, '0', '1743759691_67efa94b7ae48.jpeg', NULL, 45, 18, 0, NULL, 4, 1, 1, '2025-04-04 09:41:31', '2025-04-13 08:30:28'),
(5, 'giày vans', 3, 500000, 750000, 'đẹp', '1744002563_67f35e033c142.jpg', NULL, 2509, 40, 0, 4, 0, 0, 1, '2025-04-07 05:09:23', '2025-04-14 03:19:58'),
(6, 'Biti\'s Hunter Street x Vietmax 2020 - BST HaNoi Culture Patchwork Old Wall Yellow.', 4, 250000, 1000000, 'đẹp', '1744007288_bang-size-giay-bitis.jpg', NULL, 891, 76, 0, 3, 4.5, 2, 1, '2025-04-07 06:28:08', '2025-04-14 03:36:32');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `sanpham_chitiet`
--

CREATE TABLE `sanpham_chitiet` (
  `id_chitiet` int(11) NOT NULL,
  `id_sanpham` int(11) NOT NULL,
  `id_kichthuoc` int(11) NOT NULL,
  `id_mausac` int(11) NOT NULL,
  `soluong` int(11) NOT NULL DEFAULT 0,
  `hinhanh_mau` varchar(255) DEFAULT NULL,
  `gia_rieng` decimal(10,0) DEFAULT NULL COMMENT 'Giá riêng cho phiên bản này (nếu có)'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `sanpham_chitiet`
--

INSERT INTO `sanpham_chitiet` (`id_chitiet`, `id_sanpham`, `id_kichthuoc`, `id_mausac`, `soluong`, `hinhanh_mau`, `gia_rieng`) VALUES
(124, 4, 3, 2, 45, NULL, NULL),
(125, 4, 3, 1, 45, NULL, NULL),
(126, 4, 4, 2, 45, NULL, NULL),
(127, 4, 4, 1, 45, NULL, NULL),
(128, 4, 5, 2, 45, NULL, NULL),
(129, 4, 5, 1, 45, NULL, NULL),
(130, 4, 6, 2, 45, NULL, NULL),
(131, 4, 6, 1, 45, NULL, NULL),
(132, 4, 7, 2, 45, NULL, NULL),
(133, 4, 7, 1, 45, NULL, NULL),
(134, 4, 8, 2, 45, NULL, NULL),
(135, 4, 8, 1, 45, NULL, NULL),
(364, 5, 3, 2, 81, NULL, NULL),
(365, 5, 3, 8, 90, NULL, NULL),
(366, 5, 3, 4, 90, NULL, NULL),
(367, 5, 3, 5, 90, NULL, NULL),
(368, 5, 4, 2, 90, NULL, NULL),
(369, 5, 4, 8, 90, NULL, NULL),
(370, 5, 4, 4, 90, NULL, NULL),
(371, 5, 4, 5, 90, NULL, NULL),
(372, 5, 6, 2, 90, NULL, NULL),
(373, 5, 6, 8, 90, NULL, NULL),
(374, 5, 6, 4, 90, NULL, NULL),
(375, 5, 6, 5, 90, NULL, NULL),
(376, 5, 7, 2, 90, NULL, NULL),
(377, 5, 7, 8, 90, NULL, NULL),
(378, 5, 7, 4, 90, NULL, NULL),
(379, 5, 7, 5, 90, NULL, NULL),
(380, 5, 8, 2, 90, NULL, NULL),
(381, 5, 8, 8, 89, NULL, NULL),
(382, 5, 8, 4, 89, NULL, NULL),
(383, 5, 8, 5, 90, NULL, NULL),
(384, 5, 9, 2, 90, NULL, NULL),
(385, 5, 9, 8, 90, NULL, NULL),
(386, 5, 9, 4, 90, NULL, NULL),
(387, 5, 9, 5, 90, NULL, NULL),
(388, 5, 10, 2, 90, NULL, NULL),
(389, 5, 10, 8, 90, NULL, NULL),
(390, 5, 10, 4, 90, NULL, NULL),
(391, 5, 10, 5, 90, NULL, NULL),
(492, 6, 1, 7, 3, NULL, NULL),
(493, 6, 1, 10, 9, NULL, NULL),
(494, 6, 1, 2, 9, NULL, NULL),
(495, 6, 1, 6, 9, NULL, NULL),
(496, 6, 1, 8, 9, NULL, NULL),
(497, 6, 1, 9, 5, NULL, NULL),
(498, 6, 1, 4, 9, NULL, NULL),
(499, 6, 1, 5, 9, NULL, NULL),
(500, 6, 1, 1, 9, NULL, NULL),
(501, 6, 1, 3, 9, NULL, NULL),
(502, 6, 2, 7, 9, NULL, NULL),
(503, 6, 2, 10, 9, NULL, NULL),
(504, 6, 2, 2, 9, NULL, NULL),
(505, 6, 2, 6, 9, NULL, NULL),
(506, 6, 2, 8, 9, NULL, NULL),
(507, 6, 2, 9, 9, NULL, NULL),
(508, 6, 2, 4, 9, NULL, NULL),
(509, 6, 2, 5, 9, NULL, NULL),
(510, 6, 2, 1, 9, NULL, NULL),
(511, 6, 2, 3, 9, NULL, NULL),
(512, 6, 3, 7, 9, NULL, NULL),
(513, 6, 3, 10, 9, NULL, NULL),
(514, 6, 3, 2, 9, NULL, NULL),
(515, 6, 3, 6, 9, NULL, NULL),
(516, 6, 3, 8, 9, NULL, NULL),
(517, 6, 3, 9, 9, NULL, NULL),
(518, 6, 3, 4, 9, NULL, NULL),
(519, 6, 3, 5, 9, NULL, NULL),
(520, 6, 3, 1, 9, NULL, NULL),
(521, 6, 3, 3, 9, NULL, NULL),
(522, 6, 4, 7, 9, NULL, NULL),
(523, 6, 4, 10, 9, NULL, NULL),
(524, 6, 4, 2, 9, NULL, NULL),
(525, 6, 4, 6, 9, NULL, NULL),
(526, 6, 4, 8, 9, NULL, NULL),
(527, 6, 4, 9, 9, NULL, NULL),
(528, 6, 4, 4, 9, NULL, NULL),
(529, 6, 4, 5, 9, NULL, NULL),
(530, 6, 4, 1, 9, NULL, NULL),
(531, 6, 4, 3, 9, NULL, NULL),
(532, 6, 5, 7, 9, NULL, NULL),
(533, 6, 5, 10, 9, NULL, NULL),
(534, 6, 5, 2, 9, NULL, NULL),
(535, 6, 5, 6, 9, NULL, NULL),
(536, 6, 5, 8, 9, NULL, NULL),
(537, 6, 5, 9, 9, NULL, NULL),
(538, 6, 5, 4, 9, NULL, NULL),
(539, 6, 5, 5, 9, NULL, NULL),
(540, 6, 5, 1, 9, NULL, NULL),
(541, 6, 5, 3, 9, NULL, NULL),
(542, 6, 6, 7, 9, NULL, NULL),
(543, 6, 6, 10, 9, NULL, NULL),
(544, 6, 6, 2, 9, NULL, NULL),
(545, 6, 6, 6, 9, NULL, NULL),
(546, 6, 6, 8, 9, NULL, NULL),
(547, 6, 6, 9, 9, NULL, NULL),
(548, 6, 6, 4, 9, NULL, NULL),
(549, 6, 6, 5, 9, NULL, NULL),
(550, 6, 6, 1, 9, NULL, NULL),
(551, 6, 6, 3, 9, NULL, NULL),
(552, 6, 7, 7, 9, NULL, NULL),
(553, 6, 7, 10, 9, NULL, NULL),
(554, 6, 7, 2, 9, NULL, NULL),
(555, 6, 7, 6, 9, NULL, NULL),
(556, 6, 7, 8, 9, NULL, NULL),
(557, 6, 7, 9, 9, NULL, NULL),
(558, 6, 7, 4, 9, NULL, NULL),
(559, 6, 7, 5, 9, NULL, NULL),
(560, 6, 7, 1, 9, NULL, NULL),
(561, 6, 7, 3, 9, NULL, NULL),
(562, 6, 8, 7, 9, NULL, NULL),
(563, 6, 8, 10, 9, NULL, NULL),
(564, 6, 8, 2, 9, NULL, NULL),
(565, 6, 8, 6, 9, NULL, NULL),
(566, 6, 8, 8, 9, NULL, NULL),
(567, 6, 8, 9, 9, NULL, NULL),
(568, 6, 8, 4, 9, NULL, NULL),
(569, 6, 8, 5, 9, NULL, NULL),
(570, 6, 8, 1, 9, NULL, NULL),
(571, 6, 8, 3, 9, NULL, NULL),
(572, 6, 9, 7, 9, NULL, NULL),
(573, 6, 9, 10, 9, NULL, NULL),
(574, 6, 9, 2, 9, NULL, NULL),
(575, 6, 9, 6, 9, NULL, NULL),
(576, 6, 9, 8, 9, NULL, NULL),
(577, 6, 9, 9, 9, NULL, NULL),
(578, 6, 9, 4, 9, NULL, NULL),
(579, 6, 9, 5, 9, NULL, NULL),
(580, 6, 9, 1, 9, NULL, NULL),
(581, 6, 9, 3, 9, NULL, NULL),
(582, 6, 10, 7, 9, NULL, NULL),
(583, 6, 10, 10, 10, NULL, NULL),
(584, 6, 10, 2, 9, NULL, NULL),
(585, 6, 10, 6, 9, NULL, NULL),
(586, 6, 10, 8, 9, NULL, NULL),
(587, 6, 10, 9, 9, NULL, NULL),
(588, 6, 10, 4, 9, NULL, NULL),
(589, 6, 10, 5, 9, NULL, NULL),
(590, 6, 10, 1, 9, NULL, NULL),
(591, 6, 10, 3, 9, NULL, NULL),
(646, 2, 5, 10, 2, NULL, NULL),
(647, 2, 5, 2, 2, NULL, NULL),
(648, 2, 5, 6, 2, NULL, NULL),
(649, 2, 6, 10, 2, NULL, NULL),
(650, 2, 6, 2, 2, NULL, NULL),
(651, 2, 6, 6, 2, NULL, NULL),
(652, 2, 7, 10, 2, NULL, NULL),
(653, 2, 7, 2, 2, NULL, NULL),
(654, 2, 7, 6, 2, NULL, NULL),
(655, 2, 8, 10, 2, NULL, NULL),
(656, 2, 8, 2, 2, NULL, NULL),
(657, 2, 8, 6, 2, NULL, NULL),
(658, 2, 9, 10, 2, NULL, NULL),
(659, 2, 9, 2, 2, NULL, NULL),
(660, 2, 9, 6, 2, NULL, NULL),
(661, 2, 10, 10, 2, NULL, NULL),
(662, 2, 10, 2, 2, NULL, NULL),
(663, 2, 10, 6, 2, NULL, NULL),
(664, 3, 1, 2, 33, NULL, NULL),
(665, 3, 1, 6, 33, NULL, NULL),
(666, 3, 2, 2, 32, NULL, NULL),
(667, 3, 2, 6, 33, NULL, NULL),
(668, 3, 4, 2, 33, NULL, NULL),
(669, 3, 4, 6, 33, NULL, NULL),
(670, 3, 5, 2, 33, NULL, NULL),
(671, 3, 5, 6, 33, NULL, NULL),
(672, 3, 6, 2, 33, NULL, NULL),
(673, 3, 6, 6, 33, NULL, NULL),
(674, 3, 7, 2, 33, NULL, NULL),
(675, 3, 7, 6, 33, NULL, NULL),
(676, 3, 8, 2, 33, NULL, NULL),
(677, 3, 8, 6, 33, NULL, NULL),
(678, 3, 9, 2, 33, NULL, NULL),
(679, 3, 9, 6, 33, NULL, NULL),
(680, 3, 10, 2, 33, NULL, NULL),
(681, 3, 10, 6, 33, NULL, NULL);

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `settings`
--

CREATE TABLE `settings` (
  `id` int(11) NOT NULL,
  `setting_key` varchar(100) NOT NULL,
  `setting_value` text DEFAULT NULL,
  `setting_group` varchar(50) NOT NULL DEFAULT 'general',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `settings`
--

INSERT INTO `settings` (`id`, `setting_key`, `setting_value`, `setting_group`, `created_at`, `updated_at`) VALUES
(1, 'site_name', 'Bug Shop', 'general', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(2, 'site_description', 'Cửa hàng giày dép chất lượng cao', 'general', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(3, 'contact_email', '20210140@eaut.edu.vn', 'general', '2025-04-06 16:24:57', '2025-04-10 05:40:36'),
(4, 'contact_phone', '0982475803', 'general', '2025-04-06 16:24:57', '2025-04-10 05:40:36'),
(5, 'address', 'Đại học Công nghệ Đông Á', 'general', '2025-04-06 16:24:57', '2025-04-10 05:40:36'),
(6, 'logo', 'logo_67f66fbf8e7e3.png', 'general', '2025-04-06 16:24:57', '2025-04-09 13:01:51'),
(7, 'favicon', 'favicon_67f66fbf8eed0.jpg', 'general', '2025-04-06 16:24:57', '2025-04-09 13:01:51'),
(8, 'smtp_host', '', 'email', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(9, 'smtp_port', '587', 'email', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(10, 'smtp_username', '', 'email', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(11, 'smtp_password', '', 'email', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(12, 'smtp_encryption', 'tls', 'email', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(13, 'email_sender', 'no-reply@bugshop.com', 'email', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(14, 'email_sender_name', 'Bug Shop', 'email', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(15, 'default_shipping_fee', '30000', 'order', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(16, 'free_shipping_threshold', '500000', 'order', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(17, 'order_prefix', 'BUG-', 'order', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(18, 'enable_cod', '1', 'order', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(19, 'enable_bank_transfer', '1', 'order', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(20, 'facebook_url', 'https://www.facebook.com/thai.dui57?locale=vi_VN', 'social', '2025-04-06 16:24:57', '2025-04-08 05:41:03'),
(21, 'instagram_url', '', 'social', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(22, 'twitter_url', '', 'social', '2025-04-06 16:24:57', '2025-04-06 16:24:57'),
(23, 'youtube_url', '', 'social', '2025-04-06 16:24:57', '2025-04-06 16:24:57');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `thanh_toan`
--

CREATE TABLE `thanh_toan` (
  `id` int(11) NOT NULL,
  `id_donhang` int(11) NOT NULL,
  `ma_giaodich` varchar(100) NOT NULL,
  `so_tien` decimal(12,2) NOT NULL,
  `phuong_thuc` varchar(50) NOT NULL,
  `ngan_hang` varchar(50) DEFAULT NULL,
  `ngay_thanhtoan` datetime NOT NULL,
  `trang_thai` tinyint(1) NOT NULL COMMENT '0: Thất bại, 1: Thành công',
  `ghi_chu` text DEFAULT NULL,
  `ngay_tao` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `thanh_toan`
--

INSERT INTO `thanh_toan` (`id`, `id_donhang`, `ma_giaodich`, `so_tien`, `phuong_thuc`, `ngan_hang`, `ngay_thanhtoan`, `trang_thai`, `ghi_chu`, `ngay_tao`) VALUES
(1, 22, '0', 36000.00, 'vnpay', 'VNPAY', '2025-04-08 23:11:05', 0, 'Thanh toán thất bại qua VNPAY. Mã lỗi: 24', '2025-04-08 16:11:05'),
(2, 23, '14896396', 530000.00, 'vnpay', 'NCB', '2025-04-08 23:12:37', 1, 'Thanh toan don hang #23 tai Bug Shop', '2025-04-08 16:12:37'),
(3, 24, '14896418', 36000.00, 'vnpay', 'NCB', '2025-04-08 23:19:06', 1, 'Thanh toan don hang #24 tai Bug Shop', '2025-04-08 16:19:06'),
(4, 25, '14897211', 230000.00, 'vnpay', 'NCB', '2025-04-09 12:43:10', 1, 'Thanh toan don hang #25 tai Bug Shop', '2025-04-09 05:43:10'),
(5, 26, '0', 230000.00, 'vnpay', 'VNPAY', '2025-04-09 17:02:32', 0, 'Thanh toán thất bại qua VNPAY. Mã lỗi: 24', '2025-04-09 10:02:32'),
(6, 27, '14898522', 530000.00, 'vnpay', 'NCB', '2025-04-09 22:32:04', 1, 'Thanh toan don hang #27 tai Bug Shop', '2025-04-09 15:32:04'),
(7, 29, '14904486', 30000.00, 'vnpay', 'NCB', '2025-04-13 00:16:04', 1, 'Thanh toan don hang #29 tai Bug Shop', '2025-04-12 17:16:04'),
(8, 30, 'cod-30-1744532200', 36000.00, 'cod', NULL, '2025-04-13 15:16:40', 1, 'Thanh toán khi nhận hàng', '2025-04-13 08:16:40'),
(9, 31, 'cod-31-1744532691', 36000.00, 'cod', NULL, '2025-04-13 15:24:51', 1, 'Thanh toán khi nhận hàng', '2025-04-13 08:24:51'),
(10, 32, 'cod-32-1744532884', 280000.00, 'cod', NULL, '2025-04-13 15:28:04', 1, 'Thanh toán khi nhận hàng', '2025-04-13 08:28:04'),
(11, 33, 'cod-33-1744601839', 530000.00, 'cod', NULL, '2025-04-14 10:37:19', 1, 'Thanh toán khi nhận hàng', '2025-04-14 03:37:19');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `thuonghieu`
--

CREATE TABLE `thuonghieu` (
  `id_thuonghieu` int(11) NOT NULL,
  `tenthuonghieu` varchar(100) NOT NULL,
  `logo` varchar(200) DEFAULT NULL,
  `mota` text DEFAULT NULL,
  `trangthai` tinyint(1) NOT NULL DEFAULT 1 COMMENT '0: Ẩn, 1: Hiển thị'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `thuonghieu`
--

INSERT INTO `thuonghieu` (`id_thuonghieu`, `tenthuonghieu`, `logo`, `mota`, `trangthai`) VALUES
(1, 'Nike', 'nike_logo.png', 'Thương hiệu giày thể thao hàng đầu thế giới', 1),
(2, 'Adidas', 'adidas_logo.svg', 'Nhà sản xuất đồ thể thao lớn từ Đức', 1),
(3, 'Bitis', 'bitis_logo.png', 'Thương hiệu giày Việt Nam', 1),
(4, 'Vans', 'vans_logo.jpg', 'Thương hiệu giày đường phố từ Mỹ', 1),
(5, 'Converse', 'converse_logo.png', 'Nổi tiếng với dòng giày Chuck Taylor', 1);

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `users`
--

CREATE TABLE `users` (
  `id_user` int(11) NOT NULL,
  `taikhoan` varchar(100) NOT NULL,
  `matkhau` char(100) NOT NULL,
  `email` varchar(100) DEFAULT NULL,
  `sdt` varchar(10) NOT NULL,
  `diachi` varchar(500) NOT NULL,
  `tenuser` varchar(100) NOT NULL,
  `loai_user` tinyint(1) NOT NULL DEFAULT 0 COMMENT '0: Người dùng',
  `trang_thai` tinyint(1) NOT NULL DEFAULT 1 COMMENT '0: Khóa, 1: Hoạt động',
  `ly_do_khoa` text DEFAULT NULL,
  `ngay_tao` timestamp NOT NULL DEFAULT current_timestamp(),
  `anh_dai_dien` varchar(200) DEFAULT NULL,
  `diem_danh_gia` float DEFAULT 0,
  `so_luong_danh_gia` int(11) DEFAULT 0,
  `trang_thai_xac_thuc` tinyint(1) DEFAULT 0 COMMENT '0: Chưa xác thực, 1: Đã xác thực'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `users`
--

INSERT INTO `users` (`id_user`, `taikhoan`, `matkhau`, `email`, `sdt`, `diachi`, `tenuser`, `loai_user`, `trang_thai`, `ly_do_khoa`, `ngay_tao`, `anh_dai_dien`, `diem_danh_gia`, `so_luong_danh_gia`, `trang_thai_xac_thuc`) VALUES
(4, 'thai2003', '$2y$10$HNdMO8BgOXINny7jHPgvIeg1MpY6PDeCGet/SX.C3EZsnAf8iZJUm', 'thai2@gmail.com', '0423456789', 'hn', 'nguyen van c', 0, 1, NULL, '2025-04-03 09:55:53', NULL, 0, 0, 0),
(5, 'thaidui', '$2y$10$AIf6eJ38BNSYbohYhvKdQ.APBFPC.BY7cOrtDmZcpqdgVCtzdPsai', 'thai@gmail.com', '0123456789', 'hd', 'nguyen xuan thai', 0, 1, NULL, '2025-04-03 13:22:48', NULL, 0, 0, 0),
(6, 'thaidui1', '$2y$10$0AwJz9s6hRoDslfuX5syH.zJ564xqmC8pwNlfR6gL6CULVkFQrVi2', 'thai1@gmail.com', '0123456781', 'đông tiến', 'nguyen xuan thai', 0, 1, NULL, '2025-04-05 05:23:13', NULL, 0, 0, 0),
(7, 'thaidui3', '$2y$10$zsuzw.Rv6j.O2pjG7miOle4meqxm39LQORVAxaD.CXPuIwUoaRPGy', 'thai3@gmail.com', '0123456782', 'làng xóm', 'nguyen xuan thai3', 0, 1, NULL, '2025-04-08 16:17:20', NULL, 0, 0, 0),
(8, 'songdatdao', '$2y$10$IlvkZXtQHKrJ8xf9/uzjw.wxc7TStjR05qnIScumeXvI1f4zuzVSS', 'song@gmail.com', '0223456784', 'làng xóm', 'lò vi sóng', 0, 1, NULL, '2025-04-09 15:35:48', NULL, 0, 0, 0);

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `user_logs`
--

CREATE TABLE `user_logs` (
  `id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `admin_id` int(11) NOT NULL,
  `action` varchar(255) NOT NULL,
  `details` text DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `user_logs`
--

INSERT INTO `user_logs` (`id`, `user_id`, `admin_id`, `action`, `details`, `created_at`) VALUES
(1, 8, 6, 'Khóa tài khoản', 'Tài khoản bị khóa bởi Super Administrator. Lý do: ok', '2025-04-09 15:44:15'),
(2, 8, 6, 'Mở khóa tài khoản', 'Tài khoản được mở khóa bởi Super Administrator', '2025-04-09 15:44:30'),
(3, 8, 6, 'Khóa tài khoản', 'Tài khoản bị khóa bởi Super Administrator. Lý do: test', '2025-04-09 15:55:55'),
(4, 8, 6, 'Mở khóa tài khoản', 'Tài khoản được mở khóa bởi Super Administrator', '2025-04-09 15:58:26'),
(5, 8, 6, 'Khóa tài khoản', 'Tài khoản bị khóa bởi Super Administrator. Lý do: test khóa', '2025-04-09 16:04:56');

-- --------------------------------------------------------

--
-- Cấu trúc bảng cho bảng `wishlist`
--

CREATE TABLE `wishlist` (
  `id` int(11) NOT NULL,
  `id_user` int(11) NOT NULL,
  `id_sanpham` int(11) NOT NULL,
  `ngay_them` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Đang đổ dữ liệu cho bảng `wishlist`
--

INSERT INTO `wishlist` (`id`, `id_user`, `id_sanpham`, `ngay_them`) VALUES
(2, 6, 6, '2025-04-10 07:31:40'),
(4, 6, 5, '2025-04-10 07:33:47');

--
-- Chỉ mục cho các bảng đã đổ
--

--
-- Chỉ mục cho bảng `admin`
--
ALTER TABLE `admin`
  ADD PRIMARY KEY (`id_admin`),
  ADD UNIQUE KEY `taikhoan_unique` (`taikhoan`),
  ADD UNIQUE KEY `email_unique` (`email`);

--
-- Chỉ mục cho bảng `admin_actions`
--
ALTER TABLE `admin_actions`
  ADD PRIMARY KEY (`id`),
  ADD KEY `admin_id` (`admin_id`);

--
-- Chỉ mục cho bảng `admin_roles`
--
ALTER TABLE `admin_roles`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `admin_role_unique` (`id_admin`,`id_role`),
  ADD KEY `id_role` (`id_role`);

--
-- Chỉ mục cho bảng `customer_notes`
--
ALTER TABLE `customer_notes`
  ADD PRIMARY KEY (`id`),
  ADD KEY `id_user` (`id_user`);

--
-- Chỉ mục cho bảng `danhgia`
--
ALTER TABLE `danhgia`
  ADD PRIMARY KEY (`id_danhgia`),
  ADD KEY `id_sanpham` (`id_sanpham`),
  ADD KEY `id_user` (`id_user`);

--
-- Chỉ mục cho bảng `donhang`
--
ALTER TABLE `donhang`
  ADD PRIMARY KEY (`id_donhang`),
  ADD KEY `id_nguoidung` (`id_nguoidung`);

--
-- Chỉ mục cho bảng `donhang_chitiet`
--
ALTER TABLE `donhang_chitiet`
  ADD PRIMARY KEY (`id_chitiet`),
  ADD KEY `id_donhang` (`id_donhang`),
  ADD KEY `id_sanpham` (`id_sanpham`),
  ADD KEY `id_kichthuoc` (`id_kichthuoc`),
  ADD KEY `id_mausac` (`id_mausac`);

--
-- Chỉ mục cho bảng `donhang_lichsu`
--
ALTER TABLE `donhang_lichsu`
  ADD PRIMARY KEY (`id`),
  ADD KEY `id_donhang` (`id_donhang`);

--
-- Chỉ mục cho bảng `giohang`
--
ALTER TABLE `giohang`
  ADD PRIMARY KEY (`id_giohang`),
  ADD KEY `id_nguoidung` (`id_nguoidung`);

--
-- Chỉ mục cho bảng `giohang_chitiet`
--
ALTER TABLE `giohang_chitiet`
  ADD PRIMARY KEY (`id_chitiet`),
  ADD KEY `id_giohang` (`id_giohang`),
  ADD KEY `id_sanpham` (`id_sanpham`),
  ADD KEY `id_kichthuoc` (`id_kichthuoc`),
  ADD KEY `id_mausac` (`id_mausac`);

--
-- Chỉ mục cho bảng `hoantra`
--
ALTER TABLE `hoantra`
  ADD PRIMARY KEY (`id_hoantra`),
  ADD KEY `id_donhang` (`id_donhang`),
  ADD KEY `id_sanpham` (`id_sanpham`),
  ADD KEY `id_nguoidung` (`id_nguoidung`);

--
-- Chỉ mục cho bảng `khuyen_mai`
--
ALTER TABLE `khuyen_mai`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `ma_code_unique` (`ma_code`),
  ADD KEY `id_nguoiban` (`id_nguoiban`);

--
-- Chỉ mục cho bảng `khuyen_mai_lichsu`
--
ALTER TABLE `khuyen_mai_lichsu`
  ADD PRIMARY KEY (`id`),
  ADD KEY `id_khuyen_mai` (`id_khuyen_mai`),
  ADD KEY `id_donhang` (`id_donhang`),
  ADD KEY `id_nguoidung` (`id_nguoidung`);

--
-- Chỉ mục cho bảng `khuyen_mai_loai`
--
ALTER TABLE `khuyen_mai_loai`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `id_khuyen_mai_loai` (`id_khuyen_mai`,`id_loai`),
  ADD KEY `id_loai` (`id_loai`);

--
-- Chỉ mục cho bảng `khuyen_mai_sanpham`
--
ALTER TABLE `khuyen_mai_sanpham`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `id_khuyen_mai_sanpham` (`id_khuyen_mai`,`id_sanpham`),
  ADD KEY `id_sanpham` (`id_sanpham`);

--
-- Chỉ mục cho bảng `kichthuoc`
--
ALTER TABLE `kichthuoc`
  ADD PRIMARY KEY (`id_kichthuoc`);

--
-- Chỉ mục cho bảng `loaisanpham`
--
ALTER TABLE `loaisanpham`
  ADD PRIMARY KEY (`id_loai`);

--
-- Chỉ mục cho bảng `mausac`
--
ALTER TABLE `mausac`
  ADD PRIMARY KEY (`id_mausac`);

--
-- Chỉ mục cho bảng `mausac_hinhanh`
--
ALTER TABLE `mausac_hinhanh`
  ADD PRIMARY KEY (`id`),
  ADD KEY `id_sanpham` (`id_sanpham`),
  ADD KEY `id_mausac` (`id_mausac`);

--
-- Chỉ mục cho bảng `permissions`
--
ALTER TABLE `permissions`
  ADD PRIMARY KEY (`id_permission`),
  ADD UNIQUE KEY `ma_permission` (`ma_permission`);

--
-- Chỉ mục cho bảng `roles`
--
ALTER TABLE `roles`
  ADD PRIMARY KEY (`id_role`);

--
-- Chỉ mục cho bảng `role_permissions`
--
ALTER TABLE `role_permissions`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `role_permission_unique` (`id_role`,`id_permission`),
  ADD KEY `id_permission` (`id_permission`);

--
-- Chỉ mục cho bảng `sanpham`
--
ALTER TABLE `sanpham`
  ADD PRIMARY KEY (`id_sanpham`),
  ADD KEY `id_loai` (`id_loai`),
  ADD KEY `id_thuonghieu` (`id_thuonghieu`);

--
-- Chỉ mục cho bảng `sanpham_chitiet`
--
ALTER TABLE `sanpham_chitiet`
  ADD PRIMARY KEY (`id_chitiet`),
  ADD UNIQUE KEY `sanpham_size_color_unique` (`id_sanpham`,`id_kichthuoc`,`id_mausac`),
  ADD KEY `id_kichthuoc` (`id_kichthuoc`),
  ADD KEY `id_mausac` (`id_mausac`);

--
-- Chỉ mục cho bảng `settings`
--
ALTER TABLE `settings`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `setting_key` (`setting_key`);

--
-- Chỉ mục cho bảng `thanh_toan`
--
ALTER TABLE `thanh_toan`
  ADD PRIMARY KEY (`id`),
  ADD KEY `id_donhang` (`id_donhang`);

--
-- Chỉ mục cho bảng `thuonghieu`
--
ALTER TABLE `thuonghieu`
  ADD PRIMARY KEY (`id_thuonghieu`);

--
-- Chỉ mục cho bảng `users`
--
ALTER TABLE `users`
  ADD PRIMARY KEY (`id_user`),
  ADD UNIQUE KEY `taikhoan_unique` (`taikhoan`),
  ADD UNIQUE KEY `sdt_unique` (`sdt`),
  ADD UNIQUE KEY `email_unique` (`email`);

--
-- Chỉ mục cho bảng `user_logs`
--
ALTER TABLE `user_logs`
  ADD PRIMARY KEY (`id`),
  ADD KEY `user_id` (`user_id`),
  ADD KEY `admin_id` (`admin_id`);

--
-- Chỉ mục cho bảng `wishlist`
--
ALTER TABLE `wishlist`
  ADD PRIMARY KEY (`id`),
  ADD KEY `id_user` (`id_user`),
  ADD KEY `id_sanpham` (`id_sanpham`);

--
-- AUTO_INCREMENT cho các bảng đã đổ
--

--
-- AUTO_INCREMENT cho bảng `admin`
--
ALTER TABLE `admin`
  MODIFY `id_admin` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=9;

--
-- AUTO_INCREMENT cho bảng `admin_actions`
--
ALTER TABLE `admin_actions`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=63;

--
-- AUTO_INCREMENT cho bảng `admin_roles`
--
ALTER TABLE `admin_roles`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=23;

--
-- AUTO_INCREMENT cho bảng `customer_notes`
--
ALTER TABLE `customer_notes`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT cho bảng `danhgia`
--
ALTER TABLE `danhgia`
  MODIFY `id_danhgia` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;

--
-- AUTO_INCREMENT cho bảng `donhang`
--
ALTER TABLE `donhang`
  MODIFY `id_donhang` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=34;

--
-- AUTO_INCREMENT cho bảng `donhang_chitiet`
--
ALTER TABLE `donhang_chitiet`
  MODIFY `id_chitiet` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=34;

--
-- AUTO_INCREMENT cho bảng `donhang_lichsu`
--
ALTER TABLE `donhang_lichsu`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=54;

--
-- AUTO_INCREMENT cho bảng `giohang`
--
ALTER TABLE `giohang`
  MODIFY `id_giohang` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=24;

--
-- AUTO_INCREMENT cho bảng `giohang_chitiet`
--
ALTER TABLE `giohang_chitiet`
  MODIFY `id_chitiet` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=43;

--
-- AUTO_INCREMENT cho bảng `hoantra`
--
ALTER TABLE `hoantra`
  MODIFY `id_hoantra` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT cho bảng `khuyen_mai`
--
ALTER TABLE `khuyen_mai`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;

--
-- AUTO_INCREMENT cho bảng `khuyen_mai_lichsu`
--
ALTER TABLE `khuyen_mai_lichsu`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT cho bảng `khuyen_mai_loai`
--
ALTER TABLE `khuyen_mai_loai`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT cho bảng `khuyen_mai_sanpham`
--
ALTER TABLE `khuyen_mai_sanpham`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT cho bảng `kichthuoc`
--
ALTER TABLE `kichthuoc`
  MODIFY `id_kichthuoc` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=11;

--
-- AUTO_INCREMENT cho bảng `loaisanpham`
--
ALTER TABLE `loaisanpham`
  MODIFY `id_loai` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;

--
-- AUTO_INCREMENT cho bảng `mausac`
--
ALTER TABLE `mausac`
  MODIFY `id_mausac` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=12;

--
-- AUTO_INCREMENT cho bảng `mausac_hinhanh`
--
ALTER TABLE `mausac_hinhanh`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;

--
-- AUTO_INCREMENT cho bảng `permissions`
--
ALTER TABLE `permissions`
  MODIFY `id_permission` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=38;

--
-- AUTO_INCREMENT cho bảng `roles`
--
ALTER TABLE `roles`
  MODIFY `id_role` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=5;

--
-- AUTO_INCREMENT cho bảng `role_permissions`
--
ALTER TABLE `role_permissions`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=110;

--
-- AUTO_INCREMENT cho bảng `sanpham`
--
ALTER TABLE `sanpham`
  MODIFY `id_sanpham` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;

--
-- AUTO_INCREMENT cho bảng `sanpham_chitiet`
--
ALTER TABLE `sanpham_chitiet`
  MODIFY `id_chitiet` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=682;

--
-- AUTO_INCREMENT cho bảng `settings`
--
ALTER TABLE `settings`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=41;

--
-- AUTO_INCREMENT cho bảng `thanh_toan`
--
ALTER TABLE `thanh_toan`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=12;

--
-- AUTO_INCREMENT cho bảng `thuonghieu`
--
ALTER TABLE `thuonghieu`
  MODIFY `id_thuonghieu` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;

--
-- AUTO_INCREMENT cho bảng `users`
--
ALTER TABLE `users`
  MODIFY `id_user` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=9;

--
-- AUTO_INCREMENT cho bảng `user_logs`
--
ALTER TABLE `user_logs`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;

--
-- AUTO_INCREMENT cho bảng `wishlist`
--
ALTER TABLE `wishlist`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;

--
-- Các ràng buộc cho các bảng đã đổ
--

--
-- Các ràng buộc cho bảng `admin_roles`
--
ALTER TABLE `admin_roles`
  ADD CONSTRAINT `admin_roles_ibfk_1` FOREIGN KEY (`id_admin`) REFERENCES `admin` (`id_admin`) ON DELETE CASCADE,
  ADD CONSTRAINT `admin_roles_ibfk_2` FOREIGN KEY (`id_role`) REFERENCES `roles` (`id_role`) ON DELETE CASCADE;

--
-- Các ràng buộc cho bảng `danhgia`
--
ALTER TABLE `danhgia`
  ADD CONSTRAINT `danhgia_ibfk_1` FOREIGN KEY (`id_sanpham`) REFERENCES `sanpham` (`id_sanpham`),
  ADD CONSTRAINT `danhgia_ibfk_2` FOREIGN KEY (`id_user`) REFERENCES `users` (`id_user`);

--
-- Các ràng buộc cho bảng `donhang`
--
ALTER TABLE `donhang`
  ADD CONSTRAINT `donhang_ibfk_1` FOREIGN KEY (`id_nguoidung`) REFERENCES `users` (`id_user`);

--
-- Các ràng buộc cho bảng `donhang_chitiet`
--
ALTER TABLE `donhang_chitiet`
  ADD CONSTRAINT `donhang_chitiet_ibfk_1` FOREIGN KEY (`id_donhang`) REFERENCES `donhang` (`id_donhang`),
  ADD CONSTRAINT `donhang_chitiet_ibfk_2` FOREIGN KEY (`id_sanpham`) REFERENCES `sanpham` (`id_sanpham`),
  ADD CONSTRAINT `donhang_chitiet_ibfk_3` FOREIGN KEY (`id_kichthuoc`) REFERENCES `kichthuoc` (`id_kichthuoc`),
  ADD CONSTRAINT `donhang_chitiet_ibfk_4` FOREIGN KEY (`id_mausac`) REFERENCES `mausac` (`id_mausac`);

--
-- Các ràng buộc cho bảng `donhang_lichsu`
--
ALTER TABLE `donhang_lichsu`
  ADD CONSTRAINT `donhang_lichsu_ibfk_1` FOREIGN KEY (`id_donhang`) REFERENCES `donhang` (`id_donhang`) ON DELETE CASCADE;

--
-- Các ràng buộc cho bảng `giohang_chitiet`
--
ALTER TABLE `giohang_chitiet`
  ADD CONSTRAINT `giohang_chitiet_ibfk_1` FOREIGN KEY (`id_giohang`) REFERENCES `giohang` (`id_giohang`) ON DELETE CASCADE,
  ADD CONSTRAINT `giohang_chitiet_ibfk_2` FOREIGN KEY (`id_sanpham`) REFERENCES `sanpham` (`id_sanpham`),
  ADD CONSTRAINT `giohang_chitiet_ibfk_3` FOREIGN KEY (`id_kichthuoc`) REFERENCES `kichthuoc` (`id_kichthuoc`),
  ADD CONSTRAINT `giohang_chitiet_ibfk_4` FOREIGN KEY (`id_mausac`) REFERENCES `mausac` (`id_mausac`);

--
-- Các ràng buộc cho bảng `khuyen_mai_lichsu`
--
ALTER TABLE `khuyen_mai_lichsu`
  ADD CONSTRAINT `khuyen_mai_lichsu_ibfk_1` FOREIGN KEY (`id_khuyen_mai`) REFERENCES `khuyen_mai` (`id`),
  ADD CONSTRAINT `khuyen_mai_lichsu_ibfk_2` FOREIGN KEY (`id_donhang`) REFERENCES `donhang` (`id_donhang`),
  ADD CONSTRAINT `khuyen_mai_lichsu_ibfk_3` FOREIGN KEY (`id_nguoidung`) REFERENCES `users` (`id_user`);

--
-- Các ràng buộc cho bảng `khuyen_mai_loai`
--
ALTER TABLE `khuyen_mai_loai`
  ADD CONSTRAINT `khuyen_mai_loai_ibfk_1` FOREIGN KEY (`id_khuyen_mai`) REFERENCES `khuyen_mai` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `khuyen_mai_loai_ibfk_2` FOREIGN KEY (`id_loai`) REFERENCES `loaisanpham` (`id_loai`) ON DELETE CASCADE;

--
-- Các ràng buộc cho bảng `khuyen_mai_sanpham`
--
ALTER TABLE `khuyen_mai_sanpham`
  ADD CONSTRAINT `khuyen_mai_sanpham_ibfk_1` FOREIGN KEY (`id_khuyen_mai`) REFERENCES `khuyen_mai` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `khuyen_mai_sanpham_ibfk_2` FOREIGN KEY (`id_sanpham`) REFERENCES `sanpham` (`id_sanpham`) ON DELETE CASCADE;

--
-- Các ràng buộc cho bảng `role_permissions`
--
ALTER TABLE `role_permissions`
  ADD CONSTRAINT `role_permissions_ibfk_1` FOREIGN KEY (`id_role`) REFERENCES `roles` (`id_role`) ON DELETE CASCADE,
  ADD CONSTRAINT `role_permissions_ibfk_2` FOREIGN KEY (`id_permission`) REFERENCES `permissions` (`id_permission`) ON DELETE CASCADE;

--
-- Các ràng buộc cho bảng `sanpham`
--
ALTER TABLE `sanpham`
  ADD CONSTRAINT `sanpham_ibfk_1` FOREIGN KEY (`id_loai`) REFERENCES `loaisanpham` (`id_loai`),
  ADD CONSTRAINT `sanpham_ibfk_3` FOREIGN KEY (`id_thuonghieu`) REFERENCES `thuonghieu` (`id_thuonghieu`);

--
-- Các ràng buộc cho bảng `sanpham_chitiet`
--
ALTER TABLE `sanpham_chitiet`
  ADD CONSTRAINT `sanpham_chitiet_ibfk_1` FOREIGN KEY (`id_sanpham`) REFERENCES `sanpham` (`id_sanpham`),
  ADD CONSTRAINT `sanpham_chitiet_ibfk_2` FOREIGN KEY (`id_kichthuoc`) REFERENCES `kichthuoc` (`id_kichthuoc`),
  ADD CONSTRAINT `sanpham_chitiet_ibfk_3` FOREIGN KEY (`id_mausac`) REFERENCES `mausac` (`id_mausac`);

--
-- Các ràng buộc cho bảng `thanh_toan`
--
ALTER TABLE `thanh_toan`
  ADD CONSTRAINT `thanh_toan_ibfk_1` FOREIGN KEY (`id_donhang`) REFERENCES `donhang` (`id_donhang`);

--
-- Các ràng buộc cho bảng `wishlist`
--
ALTER TABLE `wishlist`
  ADD CONSTRAINT `wishlist_ibfk_1` FOREIGN KEY (`id_user`) REFERENCES `users` (`id_user`) ON DELETE CASCADE,
  ADD CONSTRAINT `wishlist_ibfk_2` FOREIGN KEY (`id_sanpham`) REFERENCES `sanpham` (`id_sanpham`) ON DELETE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;